montageDefine("918dae1","ui/code-mirror.reel/codemirror/codemirror-min",{dependencies:[],factory:function(e,t){var n=t.CodeMirror=function(){function e(a,u){function g(e){return e>=0&&$n.size>e}function y(e){return d($n,e)}function O(e,t){li=!0;for(var n=t-e.height,i=e;i;i=i.parent)i.height+=n}function T(e){var t={line:0,ch:0};ot(t,{line:$n.size-1,ch:y($n.size-1).text.length},K(e),t,t),ni=!0}function B(){var e=[];return $n.iter(0,$n.size,function(t){e.push(t.text)}),e.join("\n")}function N(e){function t(e){var n=vn(e,!0);if(n&&!M(n,o)){Gn||rt(),o=n,Pt(i,n),ni=!1;var r=Et();(n.line>=r.to||n.line<r.from)&&(a=setTimeout(Tn(function(){t(e)}),150))}}Mt(e.shiftKey);for(var n=C(e);n!=Ln;n=n.parentNode)if(n.parentNode==In&&n!=Rn)return;for(var n=C(e);n!=Ln;n=n.parentNode)if(n.parentNode==Nn)return kn.onGutterClick&&kn.onGutterClick(Ci,z(Nn.childNodes,n)+mi,e),_(e);var i=vn(e);switch(x(e)){case 3:return V&&!R&&gn(e),void 0;case 2:return i&&jt(i.line,i.ch,!0),void 0}if(!i)return C(e)==zn&&_(e),void 0;Gn||rt();var r=+new Date;if(ei&&ei.time>r-400&&M(ei.pos,i))return _(e),setTimeout(yt,20),Wt(i.line);if(Qn&&Qn.time>r-400&&M(Qn.pos,i))return ei={time:r,pos:i},_(e),qt(i);Qn={time:r,pos:i};var a,o=i;if(U&&!M(di.from,di.to)&&!P(i,di.from)&&!P(di.to,i)){Y&&(Fn.draggable=!0);var s=E(Pn,"mouseup",Tn(function(t){Y&&(Fn.draggable=!1),ti=!1,s(),10>Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)&&(_(t),jt(i.line,i.ch,!0),yt())}),!0);return ti=!0,void 0}_(e),jt(i.line,i.ch,!0);var l=E(Pn,"mousemove",Tn(function(e){clearTimeout(a),_(e),t(e)}),!0),s=E(Pn,"mouseup",Tn(function(e){clearTimeout(a);var t=vn(e);t&&Pt(i,t),_(e),yt(),ni=!0,l(),s()}),!0)}function X(e){for(var t=C(e);t!=Ln;t=t.parentNode)if(t.parentNode==Nn)return _(e);var n=vn(e);n&&(ei={time:+new Date,pos:n},_(e),qt(n))}function Z(e){function t(e,t){var i=new FileReader;i.onload=function(){a[t]=i.result,++o==r&&(n=It(n),Tn(function(){var e=ht(a.join(""),n,n);Pt(n,e)})())},i.readAsText(e)}e.preventDefault();var n=vn(e,!0),i=e.dataTransfer.files;if(n&&!kn.readOnly)if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,a=Array(r),o=0,s=0;r>s;++s)t(i[s],s);else try{var a=e.dataTransfer.getData("Text");if(a){var l=ht(a,n,n),u=di.from,c=di.to;Pt(n,l),ti&&ht("",u,c),yt()}}catch(e){}}function Q(e){var t=mt();A(t),e.dataTransfer.setDragImage(G,0,0),e.dataTransfer.setData("Text",t)}function et(e){var i,r,a=$[e.keyCode],o=W[kn.keyMap].auto;if(null==a||e.altGraphKey)return o&&(kn.keyMap=o),null;if(e.altKey&&(a="Alt-"+a),e.ctrlKey&&(a="Ctrl-"+a),e.metaKey&&(a="Cmd-"+a),e.shiftKey&&(i=t("Shift-"+a,kn.extraKeys,kn.keyMap))?r=!0:i=t(a,kn.extraKeys,kn.keyMap),"string"==typeof i&&(i=q.propertyIsEnumerable(i)?q[i]:null),o&&(i||!n(e))&&(kn.keyMap=o),!i)return!1;if(r){var s=Zn;Zn=null,i(Ci),Zn=s}else i(Ci);return _(e),!0}function tt(e){Gn||rt();var t=e.keyCode;if(H&&27==t&&(e.returnValue=!1),Mt(16==t||e.shiftKey),!kn.onKeyEvent||!kn.onKeyEvent(Ci,b(e))){var n=et(e);window.opera&&(xi=n?e.keyCode:null,!n&&(R?e.metaKey:e.ctrlKey)&&88==e.keyCode&&dt(""))}}function nt(e){if(window.opera&&e.keyCode==xi)return xi=null,_(e),void 0;if(!(kn.onKeyEvent&&kn.onKeyEvent(Ci,b(e))||window.opera&&!e.which&&et(e))){if(kn.electricChars&&Yn.electricChars){var t=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode);Yn.electricChars.indexOf(t)>-1&&setTimeout(Tn(function(){Vt(di.to.line,"smart")}),75)}gt()}}function it(e){kn.onKeyEvent&&kn.onKeyEvent(Ci,b(e))||16==e.keyCode&&(Zn=null)}function rt(){kn.readOnly||(Gn||(kn.onFocus&&kn.onFocus(Ci),Gn=!0,-1==Ln.className.search(/\bCodeMirror-focused\b/)&&(Ln.className+=" CodeMirror-focused"),si||_t(!0)),vt(),bn())}function at(){Gn&&(kn.onBlur&&kn.onBlur(Ci),Gn=!1,Ln.className=Ln.className.replace(" CodeMirror-focused","")),clearInterval(Hn),setTimeout(function(){Gn||(Zn=null)},150)}function ot(e,t,n,i,r){if(yi){var a=[];for($n.iter(e.line,t.line+1,function(e){a.push(e.text)}),yi.addChange(e.line,n.length,a);yi.done.length>kn.undoDepth;)yi.done.shift()}ct(e,t,n,i,r)}function st(e,t){var n=e.pop();if(n){var i=[],r=n.start+n.added;$n.iter(n.start,r,function(e){i.push(e.text)}),t.push({start:n.start,added:n.old.length,old:i});var a=It({line:n.start+n.old.length-1,ch:j(i[i.length-1],n.old[n.old.length-1])});ct({line:n.start,ch:0},{line:r-1,ch:y(r-1).text.length},n.old,a,a),ni=!0}}function lt(){st(yi.done,yi.undone)}function ut(){st(yi.undone,yi.done)}function ct(e,t,n,i,r){function a(e){return Math.min(t.line,t.line+b)>=e?e:e+b}var o=!1,s=bi.length;kn.lineWrapping||$n.iter(e.line,t.line,function(e){return e.text.length==s?(o=!0,!0):void 0}),(e.line!=t.line||n.length>1)&&(li=!0);var u=t.line-e.line,c=y(e.line),h=y(t.line);if(0==e.ch&&0==t.ch&&""==n[n.length-1]){var d=[],p=null;e.line?(p=y(e.line-1),p.fixMarkEnds(h)):h.fixMarkStarts();for(var f=0,m=n.length-1;m>f;++f)d.push(l.inheritMarks(n[f],p));u&&$n.remove(e.line,u,ui),d.length&&$n.insert(e.line,d)}else if(c==h)if(1==n.length)c.replace(e.ch,t.ch,n[0]);else{h=c.split(t.ch,n[n.length-1]),c.replace(e.ch,null,n[0]),c.fixMarkEnds(h);for(var d=[],f=1,m=n.length-1;m>f;++f)d.push(l.inheritMarks(n[f],c));d.push(h),$n.insert(e.line+1,d)}else if(1==n.length)c.replace(e.ch,null,n[0]),h.replace(null,t.ch,""),c.append(h),$n.remove(e.line+1,u,ui);else{var d=[];c.replace(e.ch,null,n[0]),h.replace(null,t.ch,n[n.length-1]),c.fixMarkEnds(h);for(var f=1,m=n.length-1;m>f;++f)d.push(l.inheritMarks(n[f],c));u>1&&$n.remove(e.line+1,u-1,ui),$n.insert(e.line+1,d)}if(kn.lineWrapping){var v=zn.clientWidth/pn()-3;$n.iter(e.line,e.line+n.length,function(e){if(!e.hidden){var t=Math.ceil(e.text.length/v)||1;t!=e.height&&O(e,t)}})}else $n.iter(e.line,f+n.length,function(e){var t=e.text;t.length>s&&(bi=t,s=t.length,hi=null,o=!1)}),o&&(s=0,bi="",hi=null,$n.iter(0,$n.size,function(e){var t=e.text;t.length>s&&(s=t.length,bi=t)}));for(var g=[],b=n.length-u-1,f=0,_=Xn.length;_>f;++f){var w=Xn[f];e.line>w?g.push(w):w>t.line&&g.push(w+b)}var C=e.line+Math.min(n.length,500);Cn(e.line,C),g.push(C),Xn=g,En(100),ri.push({from:e.line,to:t.line+1,diff:b});var x={from:e,to:t,text:n};if(ai){for(var E=ai;E.next;E=E.next);E.next=x}else ai=x;Lt(i,r,a(di.from.line),a(di.to.line)),In.style.height=$n.height*dn()+2*fn()+"px"}function ht(e,t,n){function i(i){if(P(i,t))return i;if(!P(n,i))return r;var a=i.line+e.length-(n.line-t.line)-1,o=i.ch;return i.line==n.line&&(o+=e[e.length-1].length-(n.ch-(n.line==t.line?t.ch:0))),{line:a,ch:o}}t=It(t),n=n?It(n):t,e=K(e);var r;return pt(e,t,n,function(e){return r=e,{from:i(di.from),to:i(di.to)}}),r}function dt(e,t){pt(K(e),di.from,di.to,function(e){return"end"==t?{from:e,to:e}:"start"==t?{from:di.from,to:di.from}:{from:di.from,to:e}})}function pt(e,t,n,i){var r=1==e.length?e[0].length+t.ch:e[e.length-1].length,a=i({line:t.line+e.length-1,ch:r});ot(t,n,e,a.from,a.to)}function ft(e,t){var n=e.line,i=t.line;if(n==i)return y(n).text.slice(e.ch,t.ch);var r=[y(n).text.slice(e.ch)];return $n.iter(n+1,i,function(e){r.push(e.text)}),r.push(y(i).text.slice(0,t.ch)),r.join("\n")}function mt(){return ft(di.from,di.to)}function vt(){Ei||Kn.set(kn.pollInterval,function(){Sn(),bt(),Gn&&vt(),On()})}function gt(){function e(){Sn();var n=bt();n||t?(Ei=!1,vt()):(t=!0,Kn.set(60,e)),On()}var t=!1;Ei=!0,Kn.set(20,e)}function bt(){if(si||!Gn||J(jn))return!1;var e=jn.value;if(e==Si)return!1;Zn=null;for(var t=0,n=Math.min(Si.length,e.length);n>t&&Si[t]==e[t];)++t;return Si.length>t?di.from={line:di.from.line,ch:di.from.ch-(Si.length-t)}:pi&&M(di.from,di.to)&&(di.to={line:di.to.line,ch:Math.min(y(di.to.line).text.length,di.to.ch+(e.length-t))}),dt(e.slice(t),"end"),Si=e,!0}function _t(e){M(di.from,di.to)?e&&(Si=jn.value=""):(Si="",jn.value=mt(),jn.select())}function yt(){kn.readOnly||jn.focus()}function wt(){if(Wn.getBoundingClientRect){var e=Wn.getBoundingClientRect();if(!H||e.top!=e.bottom){var t=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(0>e.top||e.bottom>t)&&Wn.scrollIntoView()}}}function Ct(){var e=un(di.inverted?di.from:di.to),t=kn.lineWrapping?Math.min(e.x,Fn.offsetWidth):e.x;return xt(t,e.y,t,e.yBot)}function xt(e,t,n,i){var r=mn(),a=fn(),o=dn();t+=a,i+=a,e+=r,n+=r;var s=zn.clientHeight,l=zn.scrollTop,u=!1,c=!0;l>t?(zn.scrollTop=Math.max(0,t-2*o),u=!0):i>l+s&&(zn.scrollTop=i+o-s,u=!0);var h=zn.clientWidth,d=zn.scrollLeft,p=kn.fixedGutter?Bn.clientWidth:0;return d+p>e?(50>e&&(e=0),zn.scrollLeft=Math.max(0,e-10-p),u=!0):n>h+d-3&&(zn.scrollLeft=n+10-h,u=!0,n>In.clientWidth&&(c=!1)),u&&kn.onScroll&&kn.onScroll(Ci),c}function Et(){var e=dn(),t=zn.scrollTop-fn(),n=Math.max(0,Math.floor(t/e)),i=Math.ceil((t+zn.clientHeight)/e);return{from:f($n,n),to:f($n,i)}}function St(e,t){if(!zn.clientWidth)return mi=vi=fi=0,void 0;var n=Et();if(!(e!==!0&&0==e.length&&n.from>=mi&&vi>=n.to)){var i=Math.max(n.from-100,0),r=Math.min($n.size,n.to+100);i>mi&&20>i-mi&&(i=mi),vi>r&&20>vi-r&&(r=Math.min($n.size,vi));for(var a=e===!0?[]:Ot([{from:mi,to:vi,domStart:0}],e),o=0,s=0;a.length>s;++s){var l=a[s];i>l.from&&(l.domStart+=i-l.from,l.from=i),l.to>r&&(l.to=r),l.from>=l.to?a.splice(s--,1):o+=l.to-l.from}if(o!=r-i){a.sort(function(e,t){return e.domStart-t.domStart});var u=dn(),c=Bn.style.display;Un.style.display=Bn.style.display="none",Tt(i,r,a),Un.style.display="";var h=i!=mi||r!=vi||gi!=zn.clientHeight+u;if(h&&(gi=zn.clientHeight+u),mi=i,vi=r,fi=m($n,i),Rn.style.top=fi*u+"px",In.style.height=$n.height*u+2*fn()+"px",Un.childNodes.length!=vi-mi)throw Error("BAD PATCH! "+JSON.stringify(a)+" size="+(vi-mi)+" nodes="+Un.childNodes.length);if(kn.lineWrapping){hi=zn.clientWidth;var d=Un.firstChild;$n.iter(mi,vi,function(e){if(!e.hidden){var t=Math.round(d.offsetHeight/u)||1;e.height!=t&&(O(e,t),li=!0)}d=d.nextSibling})}else null==hi&&(hi=sn(bi)),hi>zn.clientWidth?(Fn.style.width=hi+"px",In.style.width="",In.style.width=zn.scrollWidth+"px"):Fn.style.width=In.style.width="";return Bn.style.display=c,(h||li)&&kt(),Dt(),!t&&kn.onUpdate&&kn.onUpdate(Ci),!0}}}function Ot(e,t){for(var n=0,i=t.length||0;i>n;++n){for(var r=t[n],a=[],o=r.diff||0,s=0,l=e.length;l>s;++s){var u=e[s];r.to<=u.from&&r.diff?a.push({from:u.from+o,to:u.to+o,domStart:u.domStart}):r.to<=u.from||r.from>=u.to?a.push(u):(r.from>u.from&&a.push({from:u.from,to:r.from,domStart:u.domStart}),r.to<u.to&&a.push({from:r.to+o,to:u.to+o,domStart:u.domStart+(r.to-u.from)}))}e=a}return e}function Tt(e,t,n){function i(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}if(n.length){for(var r=0,a=Un.firstChild,o=0;n.length>o;++o){for(var s=n[o];s.domStart>r;)a=i(a),r++;for(var l=0,u=s.to-s.from;u>l;++l)a=a.nextSibling,r++}for(;a;)a=i(a)}else Un.innerHTML="";var c=n.shift(),a=Un.firstChild,l=e,h=di.from.line,d=di.to.line,p=e>h&&d>=e,f=Pn.createElement("div");$n.iter(e,t,function(e){var t=null,i=null;p?(t=0,d==l&&(p=!1,i=di.to.ch)):h==l&&(d==l?(t=di.from.ch,i=di.to.ch):(p=!0,t=di.from.ch)),c&&c.to==l&&(c=n.shift()),!c||c.from>l?(f.innerHTML=e.hidden?"<pre></pre>":e.getHTML(t,i,!0,_i),Un.insertBefore(f.firstChild,a)):a=a.nextSibling,++l})}function kt(){if(kn.gutter||kn.lineNumbers){var e=Rn.offsetHeight,t=zn.clientHeight;Bn.style.height=(2>e-t?t:e)+"px";var n=[],i=mi;$n.iter(mi,Math.max(vi,mi+1),function(e){if(e.hidden)n.push("<pre></pre>");else{var t=e.gutterMarker,r=kn.lineNumbers?i+kn.firstLineNumber:null;t&&t.text?r=t.text.replace("%N%",null!=r?r:""):null==r&&(r=" "),n.push(t&&t.style?'<pre class="'+t.style+'">':"<pre>",r);for(var a=1;e.height>a;++a)n.push("<br/>&#160;");n.push("</pre>")}++i}),Bn.style.display="none",Nn.innerHTML=n.join("");for(var r=($n.size+"").length,a=Nn.firstChild,o=D(a),s="";r>o.length+s.length;)s+=" ";s&&a.insertBefore(Pn.createTextNode(s),a.firstChild),Bn.style.display="",Fn.style.marginLeft=Bn.offsetWidth+"px",li=!1}}function Dt(){var e=di.inverted?di.from:di.to,t=(dn(),un(e,!0)),n=k(Ln),i=k(Un);An.style.top=t.y+i.top-n.top+"px",An.style.left=t.x+i.left-n.left+"px",M(di.from,di.to)?(Wn.style.top=t.y+"px",Wn.style.left=(kn.lineWrapping?Math.min(t.x,Fn.offsetWidth):t.x)+"px",Wn.style.display=""):Wn.style.display="none"}function Mt(e){Zn=e?Zn||(di.inverted?di.to:di.from):null}function Pt(e,t){var n=Zn&&It(Zn);n&&(P(n,e)?e=n:P(t,n)&&(t=n)),Lt(e,t),ii=!0}function Lt(e,t,n,i){if(Oi=null,null==n&&(n=di.from.line,i=di.to.line),!M(di.from,e)||!M(di.to,t)){if(P(t,e)){var r=t;t=e,e=r}e.line!=n&&(e=At(e,n,di.from.ch)),t.line!=i&&(t=At(t,i,di.to.ch)),M(e,t)?di.inverted=!1:M(e,di.to)?di.inverted=!1:M(t,di.from)&&(di.inverted=!0),M(e,t)?M(di.from,di.to)||ri.push({from:n,to:i+1}):M(di.from,di.to)?ri.push({from:e.line,to:t.line+1}):(M(e,di.from)||(n>e.line?ri.push({from:e.line,to:Math.min(t.line,n)+1}):ri.push({from:n,to:Math.min(i,e.line)+1})),M(t,di.to)||(i>t.line?ri.push({from:Math.max(n,e.line),to:i+1}):ri.push({from:Math.max(e.line,i),to:t.line+1}))),di.from=e,di.to=t,oi=!0}}function At(e,t,n){function i(t){for(var i=e.line+t,r=1==t?$n.size:-1;i!=r;){var a=y(i);if(!a.hidden){var o=e.ch;return(o>n||o>a.text.length)&&(o=a.text.length),{line:i,ch:o}}i+=t}}var r=y(e.line);return r.hidden?e.line>=t?i(1)||i(-1):i(-1)||i(1):e}function jt(e,t,n){var i=It({line:e,ch:t||0});(n?Pt:Lt)(i,i)}function zt(e){return Math.max(0,Math.min(e,$n.size-1))}function It(e){if(0>e.line)return{line:0,ch:0};if(e.line>=$n.size)return{line:$n.size-1,ch:y($n.size-1).text.length};var t=e.ch,n=y(e.line).text.length;return null==t||t>n?{line:e.line,ch:n}:0>t?{line:e.line,ch:0}:e}function Rt(e,t){function n(){for(var t=a+e,n=0>e?-1:$n.size;t!=n;t+=e){var i=y(t);if(!i.hidden)return a=t,s=i,!0}}function i(t){if(o==(0>e?0:s.text.length)){if(t||!n())return!1;o=0>e?s.text.length:0}else o+=e;return!0}var r=di.inverted?di.from:di.to,a=r.line,o=r.ch,s=y(a);if("char"==t)i();else if("column"==t)i(!0);else if("word"==t)for(var l=!1;!(0>e)||i();){if(I(s.text.charAt(o)))l=!0;else if(l){0>e&&(e=1,i());break}if(e>0&&!i())break}return{line:a,ch:o}}function Bt(e,t){var n=0>e?di.from:di.to;(Zn||M(di.from,di.to))&&(n=Rt(e,t)),jt(n.line,n.ch,!0)}function Nt(e,t){M(di.from,di.to)?0>e?ht("",Rt(e,t),di.to):ht("",di.from,Rt(e,t)):ht("",di.from,di.to),ii=!0}function Ft(e,t){var n=0,i=un(di.inverted?di.from:di.to,!0);null!=Oi&&(i.x=Oi),"page"==t?n=zn.clientHeight:"line"==t&&(n=dn());var r=cn(i.x,i.y+n*e+2);jt(r.line,r.ch,!0),Oi=i.x}function qt(e){for(var t=y(e.line).text,n=e.ch,i=e.ch;n>0&&I(t.charAt(n-1));)--n;for(;t.length>i&&I(t.charAt(i));)++i;Pt({line:e.line,ch:n},{line:e.line,ch:i})}function Wt(e){Pt({line:e,ch:0},{line:e,ch:y(e).text.length})}function Ut(e){if(M(di.from,di.to))return Vt(di.from.line,e);for(var t=di.to.line-(di.to.ch?0:1),n=di.from.line;t>=n;++n)Vt(n,e)}function Vt(e,t){if(t||(t="add"),"smart"==t)if(Yn.indent)var n=wn(e);else t="prev";var i,r=y(e),a=r.indentation(kn.tabSize),o=r.text.match(/^\s*/)[0];"prev"==t?i=e?y(e-1).indentation(kn.tabSize):0:"smart"==t?i=Yn.indent(n,r.text.slice(o.length),r.text):"add"==t?i=a+kn.indentUnit:"subtract"==t&&(i=a-kn.indentUnit),i=Math.max(0,i);var s=i-a;if(s){var l="",u=0;if(kn.indentWithTabs)for(var c=Math.floor(i/kn.tabSize);c;--c)u+=kn.tabSize,l+="	";for(;i>u;)++u,l+=" "}else{if(di.from.line!=e&&di.to.line!=e)return;var l=o}ht(l,{line:e,ch:0},{line:e,ch:o.length})}function Ht(){Yn=e.getMode(kn,kn.mode),$n.iter(0,$n.size,function(e){e.stateAfter=null}),Xn=[0],En()}function Yt(){var e=kn.gutter||kn.lineNumbers;Bn.style.display=e?"":"none",e?li=!0:Un.parentNode.style.marginLeft=0}function Xt(){if(kn.lineWrapping){Ln.className+=" CodeMirror-wrap";var e=zn.clientWidth/pn()-3;$n.iter(0,$n.size,function(t){if(!t.hidden){var n=Math.ceil(t.text.length/e)||1;1!=n&&O(t,n)}}),Fn.style.width=In.style.width=""}else Ln.className=Ln.className.replace(" CodeMirror-wrap",""),hi=null,bi="",$n.iter(0,$n.size,function(e){1!=e.height&&!e.hidden&&O(e,1),e.text.length>bi.length&&(bi=e.text)});ri.push({from:0,to:$n.size})}function Gt(){for(var e='<span class="cm-tab">',t=0;kn.tabSize>t;++t)e+=" ";return e+"</span>"}function Kt(){_i=Gt(),St(!0)}function Jt(){zn.className=zn.className.replace(/\s*cm-s-\w+/g,"")+kn.theme.replace(/(^|\s)\s*/g," cm-s-")}function $t(){this.set=[]}function Zt(e,t,n){function i(e,t,n,i){y(e).addMark(new o(t,n,i,r.set))}e=It(e),t=It(t);var r=new $t;if(e.line==t.line)i(e.line,e.ch,t.ch,n);else{i(e.line,e.ch,null,n);for(var a=e.line+1,s=t.line;s>a;++a)i(a,null,null,n);i(t.line,null,t.ch,n)}return ri.push({from:e.line,to:t.line+1}),r}function Qt(e){e=It(e);var t=new s(e.ch);return y(e.line).addMark(t),t}function en(e,t,n){return"number"==typeof e&&(e=y(zt(e))),e.gutterMarker={text:t,style:n},li=!0,e}function tn(e){"number"==typeof e&&(e=y(zt(e))),e.gutterMarker=null,li=!0}function nn(e,t){var n=e,i=e;return"number"==typeof e?i=y(zt(e)):n=p(e),null==n?null:t(i,n)?(ri.push({from:n,to:n+1}),i):null}function rn(e,t){return nn(e,function(e){return e.className!=t?(e.className=t,!0):void 0})}function an(e,t){return nn(e,function(e,n){return e.hidden!=t?(e.hidden=t,O(e,t?0:1),t&&(di.from.line==n||di.to.line==n)&&Lt(At(di.from,di.from.line,di.from.ch),At(di.to,di.to.line,di.to.ch)),li=!0):void 0})}function on(e){if("number"==typeof e){if(!g(e))return null;var t=e;if(e=y(e),!e)return null}else{var t=p(e);if(null==t)return null}var n=e.gutterMarker;return{line:t,handle:e,text:e.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:e.className}}function sn(e){return qn.innerHTML="<pre><span>x</span></pre>",qn.firstChild.firstChild.firstChild.nodeValue=e,qn.firstChild.firstChild.offsetWidth||10}function ln(e,t){var n="";if(kn.lineWrapping){var i=e.text.indexOf(" ",t+2);n=A(e.text.slice(t+1,0>i?e.text.length:i+(H?5:0)))}qn.innerHTML="<pre>"+e.getHTML(null,null,!1,_i,t)+'<span id="CodeMirror-temp-'+Pi+'">'+A(e.text.charAt(t)||" ")+"</span>"+n+"</pre>";var r=document.getElementById("CodeMirror-temp-"+Pi),a=r.offsetTop,o=r.offsetLeft;if(H&&t&&0==a&&0==o){var s=document.createElement("span");s.innerHTML="x",r.parentNode.insertBefore(s,r.nextSibling),a=s.offsetTop}return{top:a,left:o}}function un(e,t){var n,i=dn(),r=i*(m($n,e.line)-(t?fi:0));if(0==e.ch)n=0;else{var a=ln(y(e.line),e.ch);n=a.left,kn.lineWrapping&&(r+=Math.max(0,a.top))}return{x:n,y:r,yBot:r+i}}function cn(e,t){function n(e){var t=ln(s,e);if(u){var n=Math.round(t.top/i);return Math.max(0,t.left+(n-c)*zn.clientWidth)}return t.left}0>t&&(t=0);var i=dn(),r=pn(),a=fi+Math.floor(t/i),o=f($n,a);if(o>=$n.size)return{line:$n.size-1,ch:y($n.size-1).text.length};var s=y(o),l=s.text,u=kn.lineWrapping,c=u?a-m($n,o):0;if(0>=e&&0==c)return{line:o,ch:0};for(var h,d=0,p=0,v=l.length,g=Math.min(v,Math.ceil((e+.9*c*zn.clientWidth)/r));;){var b=n(g);if(!(e>=b&&v>g)){h=b,v=g;break}g=Math.min(v,Math.ceil(1.2*g))}if(e>h)return{line:o,ch:v};for(g=Math.floor(.8*v),b=n(g),e>b&&(d=g,p=b);;){if(1>=v-d)return{line:o,ch:h-e>e-p?d:v};var _=Math.ceil((d+v)/2),w=n(_);w>e?(v=_,h=w):(d=_,p=w)}}function hn(e){var t=un(e,!0),n=k(Fn);return{x:n.left+t.x,y:n.top+t.y,yBot:n.top+t.yBot}}function dn(){if(null==Di){Di="<pre>";for(var e=0;49>e;++e)Di+="x<br/>";Di+="x</pre>"}var t=Un.clientHeight;return t==ki?Ti:(ki=t,qn.innerHTML=Di,Ti=qn.firstChild.offsetHeight/50||1,qn.innerHTML="",Ti)}function pn(){return zn.clientWidth==Li?Mi:(Li=zn.clientWidth,Mi=sn("x"))}function fn(){return Fn.offsetTop}function mn(){return Fn.offsetLeft}function vn(e,t){var n,i,r=k(zn,!0);try{n=e.clientX,i=e.clientY}catch(e){return null}if(!t&&(n-r.left>zn.clientWidth||i-r.top>zn.clientHeight))return null;var a=k(Fn,!0);return cn(n-a.left,i-a.top)}function gn(e){function t(){var e=K(jn.value).join("\n");e!=r&&Tn(dt)(e,"end"),An.style.position="relative",jn.style.cssText=i,si=!1,_t(!0),vt()}var n=vn(e);if(n&&!window.opera){(M(di.from,di.to)||P(n,di.from)||!P(n,di.to))&&Tn(jt)(n.line,n.ch);var i=jn.style.cssText;An.style.position="absolute",jn.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; "+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",si=!0;var r=jn.value=mt();if(yt(),jn.select(),V){w(e);var a=E(window,"mouseup",function(){a(),setTimeout(t,20)},!0)}else setTimeout(t,50)}}function bn(){clearInterval(Hn);var e=!0;Wn.style.visibility="",Hn=setInterval(function(){Wn.style.visibility=(e=!e)?"":"hidden"},650)}function _n(e){function t(e,t,n){if(e.text)for(var i,r=e.styles,a=o?0:e.text.length-1,l=o?0:r.length-2,u=o?r.length:-2;l!=u;l+=2*s){var c=r[l];if(null==r[l+1]||r[l+1]==d){for(var h=o?0:c.length-1,m=o?c.length:-1;h!=m;h+=s,a+=s)if(a>=t&&n>a&&f.test(i=c.charAt(h))){var v=Ai[i];if(">"==v.charAt(1)==o)p.push(i);else{if(p.pop()!=v.charAt(0))return{pos:a,match:!1};if(!p.length)return{pos:a,match:!0}}}}else a+=s*c.length}}var n=di.inverted?di.from:di.to,i=y(n.line),r=n.ch-1,a=r>=0&&Ai[i.text.charAt(r)]||Ai[i.text.charAt(++r)];if(a){for(var o=(a.charAt(0),">"==a.charAt(1)),s=o?1:-1,l=i.styles,u=r+1,c=0,h=l.length;h>c;c+=2)if(0>=(u-=l[c].length)){var d=l[c+1];break}for(var p=[i.text.charAt(r)],f=/[(){}[\]]/,c=n.line,h=o?Math.min(c+100,$n.size):Math.max(-1,c-100);c!=h;c+=s){var i=y(c),m=c==n.line,v=t(i,m&&o?r+1:0,m&&!o?r:i.text.length);if(v)break}v||(v={pos:null,match:!1});var d=v.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",g=Zt({line:n.line,ch:r},{line:n.line,ch:r+1},d),b=null!=v.pos&&Zt({line:c,ch:v.pos},{line:c,ch:v.pos+1},d),_=Tn(function(){g.clear(),b&&b.clear()});e?setTimeout(_,800):ci=_}}function yn(e){for(var t,n,i=e,r=e-40;i>r;--i){if(0==i)return 0;var a=y(i-1);if(a.stateAfter)return i;var o=a.indentation(kn.tabSize);(null==n||t>o)&&(n=i-1,t=o)}return n}function wn(e){var t=yn(e),n=t&&y(t-1).stateAfter;return n=n?i(Yn,n):r(Yn),$n.iter(t,e,function(e){e.highlight(Yn,n,kn.tabSize),e.stateAfter=i(Yn,n)}),e>t&&ri.push({from:t,to:e}),$n.size>e&&!y(e).stateAfter&&Xn.push(e),n}function Cn(e,t){var n=wn(e);$n.iter(e,t,function(e){e.highlight(Yn,n,kn.tabSize),e.stateAfter=i(Yn,n)})}function xn(){for(var e=+new Date+kn.workTime,t=Xn.length;Xn.length;){if(y(mi).stateAfter)var n=Xn.pop();else var n=mi;if(!(n>=$n.size)){var a=yn(n),o=a&&y(a-1).stateAfter;o=o?i(Yn,o):r(Yn);var s=0,l=Yn.compareStates,u=!1,c=a,h=!1;if($n.iter(c,$n.size,function(t){var r=t.stateAfter;if(+new Date>e)return Xn.push(c),En(kn.workDelay),u&&ri.push({from:n,to:c+1}),h=!0;var a=t.highlight(Yn,o,kn.tabSize);if(a&&(u=!0),t.stateAfter=i(Yn,o),l){if(r&&l(r,o))return!0}else if(a===!1&&r){if(++s>3&&(!Yn.indent||Yn.indent(r,"")==Yn.indent(o,"")))return!0}else s=0;++c}),h)return;u&&ri.push({from:n,to:c+1})}}t&&kn.onHighlightComplete&&kn.onHighlightComplete(Ci)}function En(e){Xn.length&&Jn.set(e,Tn(xn))}function Sn(){ni=ii=ai=null,ri=[],oi=!1,ui=[]}function On(){var e,t=!1;oi&&(t=!Ct()),ri.length?e=St(ri,!0):(oi&&Dt(),li&&kt()),t&&Ct(),oi&&(wt(),bn()),Gn&&!si&&(ni===!0||ni!==!1&&oi)&&_t(ii),oi&&kn.matchBrackets&&setTimeout(Tn(function(){ci&&(ci(),ci=null),M(di.from,di.to)&&_n(!1)}),20);var n=ai,i=ui;oi&&kn.onCursorActivity&&kn.onCursorActivity(Ci),n&&kn.onChange&&Ci&&kn.onChange(Ci,n);for(var r=0;i.length>r;++r)i[r](Ci);e&&kn.onUpdate&&kn.onUpdate(Ci)}function Tn(e){return function(){ji++||Sn();try{var t=e.apply(this,arguments)}finally{--ji||On()}return t}}var kn={},Dn=e.defaults;for(var Mn in Dn)Dn.hasOwnProperty(Mn)&&(kn[Mn]=(u&&u.hasOwnProperty(Mn)?u:Dn)[Mn]);var Pn=kn.document,Ln=Pn.createElement("div");Ln.className="CodeMirror"+(kn.lineWrapping?" CodeMirror-wrap":""),Ln.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden"></div><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div></div>',a.appendChild?a.appendChild(Ln):a(Ln);var An=Ln.firstChild,jn=An.firstChild,zn=Ln.lastChild,In=zn.firstChild,Rn=In.firstChild,Bn=Rn.firstChild,Nn=Bn.firstChild,Fn=Bn.nextSibling.firstChild,qn=Fn.firstChild,Wn=qn.nextSibling,Un=Wn.nextSibling;Jt(),/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent)&&(jn.style.width="0px"),Y||(Fn.draggable=!0),null!=kn.tabindex&&(jn.tabIndex=kn.tabindex),!kn.gutter&&!kn.lineNumbers&&(Bn.style.display="none");try{sn("x")}catch(Vn){throw Vn.message.match(/runtime/i)&&(Vn=Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),Vn}var Hn,Yn,Xn,Gn,Kn=new S,Jn=new S,$n=new h([new c([new l("")])]);Ht();var Zn,Qn,ei,ti,ni,ii,ri,ai,oi,si,li,ui,ci,hi,di={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},pi=!1,fi=0,mi=0,vi=0,gi=0,bi="",_i=Gt();Tn(function(){T(kn.value||""),ni=!1})();var yi=new v;E(zn,"mousedown",Tn(N)),E(zn,"dblclick",Tn(X)),E(Fn,"dragstart",Q),E(Fn,"selectstart",_),V||E(zn,"contextmenu",gn),E(zn,"scroll",function(){St([]),kn.fixedGutter&&(Bn.style.left=zn.scrollLeft+"px"),kn.onScroll&&kn.onScroll(Ci)}),E(window,"resize",function(){St(!0)}),E(jn,"keyup",Tn(it)),E(jn,"input",gt),E(jn,"keydown",Tn(tt)),E(jn,"keypress",Tn(nt)),E(jn,"focus",rt),E(jn,"blur",at),E(zn,"dragenter",w),E(zn,"dragover",w),E(zn,"drop",Tn(Z)),E(zn,"paste",function(){yt(),gt()}),E(jn,"paste",gt),E(jn,"cut",Tn(function(){dt("")}));var wi;try{wi=Pn.activeElement==jn}catch(Vn){}wi?setTimeout(rt,20):at();var Ci=Ln.CodeMirror={getValue:B,setValue:Tn(T),getSelection:mt,replaceSelection:Tn(dt),focus:function(){yt(),rt(),gt()},setOption:function(e,t){var n=kn[e];kn[e]=t,"mode"==e||"indentUnit"==e?Ht():"readOnly"==e&&t?(at(),jn.blur()):"theme"==e?Jt():"lineWrapping"==e&&n!=t?Tn(Xt)():"tabSize"==e&&Tn(Kt)(),("lineNumbers"==e||"gutter"==e||"firstLineNumber"==e||"theme"==e)&&Tn(Yt)()},getOption:function(e){return kn[e]},undo:Tn(lt),redo:Tn(ut),indentLine:Tn(function(e,t){g(e)&&Vt(e,null==t?"smart":t?"add":"subtract")}),indentSelection:Tn(Ut),historySize:function(){return{undo:yi.done.length,redo:yi.undone.length}},clearHistory:function(){yi=new v},matchBrackets:Tn(function(){_n(!0)}),getTokenAt:Tn(function(e){return e=It(e),y(e.line).getTokenAt(Yn,wn(e.line),e.ch)}),getStateAfter:function(e){return e=zt(null==e?$n.size-1:e),wn(e+1)},cursorCoords:function(e){return null==e&&(e=di.inverted),hn(e?di.from:di.to)},charCoords:function(e){return hn(It(e))},coordsChar:function(e){var t=k(Fn);return cn(e.x-t.left,e.y-t.top)},markText:Tn(Zt),setBookmark:Qt,setMarker:Tn(en),clearMarker:Tn(tn),setLineClass:Tn(rn),hideLine:Tn(function(e){return an(e,!0)}),showLine:Tn(function(e){return an(e,!1)}),onDeleteLine:function(e,t){if("number"==typeof e){if(!g(e))return null;e=y(e)}return(e.handlers||(e.handlers=[])).push(t),e},lineInfo:on,addWidget:function(e,t,n,i,r){e=un(It(e));var a=e.yBot,o=e.x;if(t.style.position="absolute",In.appendChild(t),"over"==i)a=e.y;else if("near"==i){var s=Math.max(zn.offsetHeight,$n.height*dn()),l=Math.max(In.clientWidth,Fn.clientWidth)-mn();e.yBot+t.offsetHeight>s&&e.y>t.offsetHeight&&(a=e.y-t.offsetHeight),o+t.offsetWidth>l&&(o=l-t.offsetWidth)}t.style.top=a+fn()+"px",t.style.left=t.style.right="","right"==r?(o=In.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?o=0:"middle"==r&&(o=(In.clientWidth-t.offsetWidth)/2),t.style.left=o+mn()+"px"),n&&xt(o,a,o+t.offsetWidth,a+t.offsetHeight)},lineCount:function(){return $n.size},clipPos:It,getCursor:function(e){return null==e&&(e=di.inverted),L(e?di.from:di.to)},somethingSelected:function(){return!M(di.from,di.to)},setCursor:Tn(function(e,t,n){null==t&&"number"==typeof e.line?jt(e.line,e.ch,n):jt(e,t,n)}),setSelection:Tn(function(e,t,n){(n?Pt:Lt)(It(e),It(t||e))}),getLine:function(e){return g(e)?y(e).text:void 0},getLineHandle:function(e){return g(e)?y(e):void 0},setLine:Tn(function(e,t){g(e)&&ht(t,{line:e,ch:0},{line:e,ch:y(e).text.length})}),removeLine:Tn(function(e){g(e)&&ht("",{line:e,ch:0},It({line:e+1,ch:0}))}),replaceRange:Tn(ht),getRange:function(e,t){return ft(It(e),It(t))},execCommand:function(e){return q[e](Ci)},moveH:Tn(Bt),deleteH:Tn(Nt),moveV:Tn(Ft),toggleOverwrite:function(){pi=!pi},posFromIndex:function(e){var t,n=0;return $n.iter(0,$n.size,function(i){var r=i.text.length+1;return r>e?(t=e,!0):(e-=r,++n,void 0)}),It({line:n,ch:t})},indexFromPos:function(e){if(0>e.line||0>e.ch)return 0;var t=e.ch;return $n.iter(0,e.line,function(e){t+=e.text.length+1}),t},operation:function(e){return Tn(e)()},refresh:function(){St(!0)},getInputField:function(){return jn},getWrapperElement:function(){return Ln},getScrollerElement:function(){return zn},getGutterElement:function(){return Bn}},xi=null,Ei=!1,Si="",Oi=null;$t.prototype.clear=Tn(function(){for(var e=1/0,t=-1/0,n=0,i=this.set.length;i>n;++n){var r=this.set[n],a=r.marked;if(a&&r.parent){var o=p(r);e=Math.min(e,o),t=Math.max(t,o);for(var s=0;a.length>s;++s)a[s].set==this.set&&a.splice(s--,1)}}1/0!=e&&ri.push({from:e,to:t+1})}),$t.prototype.find=function(){for(var e,t,n=0,i=this.set.length;i>n;++n)for(var r=this.set[n],a=r.marked,o=0;a.length>o;++o){var s=a[o];if(s.set==this.set&&(null!=s.from||null!=s.to)){var l=p(r);null!=l&&(null!=s.from&&(e={line:l,ch:s.from}),null!=s.to&&(t={line:l,ch:s.to}))}}return{from:e,to:t}};var Ti,ki,Di,Mi,Pi=Math.floor(16777215*Math.random()).toString(16),Li=0,Ai={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},ji=0;for(var zi in F)F.propertyIsEnumerable(zi)&&!Ci.propertyIsEnumerable(zi)&&(Ci[zi]=F[zi]);return Ci}function t(e,t,n){function i(e,t,n){var r=t[e];if(null!=r)return r;if(null==n&&(n=t.fallthrough),null==n)return t.catchall;if("string"==typeof n)return i(e,W[n]);for(var a=0,o=n.length;o>a;++a)if(r=i(e,W[n[a]]),null!=r)return r;return null}return t?i(e,t,n):i(e,W[n])}function n(e){var t=$[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function i(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function r(e,t,n){return e.startState?e.startState(t,n):!0}function a(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function o(e,t,n,i){this.from=e,this.to=t,this.style=n,this.set=i}function s(e){this.from=e,this.to=e,this.line=null}function l(e,t){this.styles=t||[e,null],this.text=e,this.height=1,this.marked=this.gutterMarker=this.className=this.handlers=null,this.stateAfter=this.parent=this.hidden=null}function u(e,t,n,i){for(var r=0,a=0,o=0;t>a;r+=2){var s=n[r],l=a+s.length;0==o?(l>e&&i.push(s.slice(e-a,Math.min(s.length,t-a)),n[r+1]),l>=e&&(o=1)):1==o&&(l>t?i.push(s.slice(0,t-a),n[r+1]):i.push(s,n[r+1])),a=l}}function c(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,i=0;n>t;++t)e[t].parent=this,i+=e[t].height;this.height=i}function h(e){this.children=e;for(var t=0,n=0,i=0,r=e.length;r>i;++i){var a=e[i];t+=a.chunkSize(),n+=a.height,a.parent=this}this.size=t,this.height=n,this.parent=null}function d(e,t){for(;!e.lines;)for(var n=0;;++n){var i=e.children[n],r=i.chunkSize();if(r>t){e=i;break}t-=r}return e.lines[t]}function p(e){if(null==e.parent)return null;for(var t=e.parent,n=z(t.lines,e),i=t.parent;i;t=i,i=i.parent){var r=0;for(i.children.length;i.children[r]!=t;++r)n+=i.children[r].chunkSize()}return n}function f(e,t){var n=0;e:do{for(var i=0,r=e.children.length;r>i;++i){var a=e.children[i],o=a.height;if(o>t){e=a;continue e}t-=o,n+=a.chunkSize()}return n}while(!e.lines);for(var i=0,r=e.lines.length;r>i;++i){var s=e.lines[i],l=s.height;if(l>t)break;t-=l}return n+i}function m(e,t){var n=0;e:do{for(var i=0,r=e.children.length;r>i;++i){var a=e.children[i],o=a.chunkSize();if(o>t){e=a;continue e}t-=o,n+=a.height}return n}while(!e.lines);for(var i=0;t>i;++i)n+=e.lines[i].height;return n}function v(){this.time=0,this.done=[],this.undone=[]}function g(){w(this)}function b(e){return e.stop||(e.stop=g),e}function _(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function y(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function w(e){_(e),y(e)}function C(e){return e.target||e.srcElement
}function x(e){return e.which?e.which:1&e.button?1:2&e.button?3:4&e.button?2:void 0}function E(e,t,n,i){if("function"==typeof e.addEventListener){if(e.addEventListener(t,n,!1),i)return function(){e.removeEventListener(t,n,!1)}}else{var r=function(e){n(e||window.event)};if(e.attachEvent("on"+t,r),i)return function(){e.detachEvent("on"+t,r)}}}function S(){this.id=null}function O(e,t,n){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var i=0,r=0;t>i;++i)"	"==e.charAt(i)?r+=n-r%n:++r;return r}function T(e){return e.currentStyle?e.currentStyle:window.getComputedStyle(e,null)}function k(e,t){for(var n=e.ownerDocument.body,i=0,r=0,a=!1,o=e;o;o=o.offsetParent){var s=o.offsetLeft,l=o.offsetTop;o==n?(i+=Math.abs(s),r+=Math.abs(l)):(i+=s,r+=l),t&&"fixed"==T(o).position&&(a=!0)}for(var u=t&&!a?null:n,o=e.parentNode;o!=u;o=o.parentNode)null!=o.scrollLeft&&(i-=o.scrollLeft,r-=o.scrollTop);return{left:i,top:r}}function D(e){return e.textContent||e.innerText||e.nodeValue||""}function M(e,t){return e.line==t.line&&e.ch==t.ch}function P(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function L(e){return{line:e.line,ch:e.ch}}function A(e){return G.textContent=e,G.innerHTML}function j(e,t){if(!t)return e?e.length:0;if(!e)return t.length;for(var n=e.length,i=t.length;n>=0&&i>=0&&e.charAt(n)==t.charAt(i);--n,--i);return i+1}function z(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;i>n;++n)if(e[n]==t)return n;return-1}function I(e){return/\w/.test(e)||e.toUpperCase()!=e.toLowerCase()}e.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,onKeyEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,document:window.document};var R=/Mac/.test(navigator.platform),B=(/Win/.test(navigator.platform),{}),N={};e.defineMode=function(t,n){!e.defaults.mode&&"null"!=t&&(e.defaults.mode=t),B[t]=n},e.defineMIME=function(e,t){N[e]=t},e.getMode=function(t,n){if("string"==typeof n&&N.hasOwnProperty(n)&&(n=N[n]),"string"==typeof n)var i=n,r={};else if(null!=n)var i=n.name,r=n;var a=B[i];return a?a(t,r||{}):(window.console&&console.warn("No mode "+i+" found, falling back to plain text."),e.getMode(t,"text/plain"))},e.listModes=function(){var e=[];for(var t in B)B.propertyIsEnumerable(t)&&e.push(t);return e},e.listMIMEs=function(){var e=[];for(var t in N)N.propertyIsEnumerable(t)&&e.push({mime:t,mode:N[t]});return e};var F=e.extensions={};e.defineExtension=function(e,t){F[e]=t};var q=e.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),i=!M(t,n);i||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,i?n:{line:t.line}):e.replaceRange("",t,{line:t.line+1,ch:0})},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t})},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.setCursor(0,0,!0)},goDocEnd:function(e){e.setSelection({line:e.lineCount()-1},null,!0)},goLineStart:function(e){e.setCursor(e.getCursor().line,0,!0)},goLineStartSmart:function(e){var t=e.getCursor(),n=e.getLine(t.line),i=Math.max(0,n.search(/\S/));e.setCursor(t.line,i>=t.ch&&t.ch?0:i,!0)},goLineEnd:function(e){e.setSelection({line:e.getCursor().line},null,!0)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharLeft:function(e){e.deleteH(-1,"char")},delCharRight:function(e){e.deleteH(1,"char")},delWordLeft:function(e){e.deleteH(-1,"word")},delWordRight:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){e.replaceSelection("\n","end"),e.indentLine(e.getCursor().line)},toggleOverwrite:function(e){e.toggleOverwrite()}},W=e.keyMap={};W.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"indentMore","Shift-Tab":"indentLess",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},W.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll",fallthrough:"basic"},W.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll",fallthrough:["basic","emacsy"]},W["default"]=R?W.macDefault:W.pcDefault,W.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.fromTextArea=function(t,n){function i(){t.value=s.getValue()}function r(){i(),t.form.submit=o,t.form.submit(),t.form.submit=r}if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),t.form){var a=E(t.form,"submit",i,!0);if("function"==typeof t.form.submit){var o=t.form.submit;t.form.submit=r}}t.style.display="none";var s=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return s.save=i,s.getTextArea=function(){return t},s.toTextArea=function(){i(),t.parentNode.removeChild(s.getWrapperElement()),t.style.display="",t.form&&(a(),"function"==typeof t.form.submit&&(t.form.submit=o))},s},e.copyState=i,e.startState=r,a.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return O(this.string,this.start,this.tabSize)},indentation:function(){return O(this.string,null,this.tabSize)},match:function(e,t,n){function i(e){return n?e.toLowerCase():e}if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&t!==!1&&(this.pos+=r[0].length),r}return i(this.string).indexOf(i(e),this.pos)==this.pos?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=a,o.prototype={attach:function(e){this.set.push(e)},detach:function(e){var t=z(this.set,e);t>-1&&this.set.splice(t,1)},split:function(e,t){if(e>=this.to&&null!=this.to)return null;var n=e>this.from||null==this.from?null:this.from-e+t,i=null==this.to?null:this.to-e+t;return new o(n,i,this.style,this.set)},dup:function(){return new o(null,null,this.style,this.set)},clipTo:function(e,t,n,i,r){null!=this.from&&this.from>=t&&(this.from=Math.max(i,this.from)+r),null!=this.to&&this.to>t&&(this.to=this.to>i?this.to+r:t),e&&i>this.from&&(this.to>i||null==this.to)&&(this.from=null),n&&(this.to>t||null==this.to)&&(t>this.from||null==this.from)&&(this.to=null)},isDead:function(){return null!=this.from&&null!=this.to&&this.from>=this.to},sameSet:function(e){return this.set==e.set}},s.prototype={attach:function(e){this.line=e},detach:function(e){this.line==e&&(this.line=null)},split:function(e,t){return this.from>e?(this.from=this.to=this.from-e+t,this):void 0},isDead:function(){return this.from>this.to},clipTo:function(e,t,n,i,r){(e||this.from>t)&&(n||i>this.to)?(this.from=0,this.to=-1):this.from>t&&(this.from=this.to=Math.max(i,this.from)+r)},sameSet:function(){return!1},find:function(){return this.line&&this.line.parent?{line:p(this.line),ch:this.from}:null},clear:function(){if(this.line){var e=z(this.line.marked,this);-1!=e&&this.line.marked.splice(e,1),this.line=null}}},l.inheritMarks=function(e,t){var n=new l(e),i=t&&t.marked;if(i)for(var r=0;i.length>r;++r)if(null==i[r].to&&i[r].style){var a=n.marked||(n.marked=[]),o=i[r],s=o.dup();a.push(s),s.attach(n)}return n},l.prototype={replace:function(e,t,n){var i=[],r=this.marked,a=null==t?this.text.length:t;if(u(0,e,this.styles,i),n&&i.push(n,null),u(a,this.text.length,this.styles,i),this.styles=i,this.text=this.text.slice(0,e)+n+this.text.slice(a),this.stateAfter=null,r)for(var o=n.length-(a-e),s=0,l=r[s];r.length>s;++s)l.clipTo(null==e,e||0,null==t,a,o),l.isDead()&&(l.detach(this),r.splice(s--,1))},split:function(e,t){var n=[t,null],i=this.marked;u(e,this.text.length,this.styles,n);var r=new l(t+this.text.slice(e),n);if(i)for(var a=0;i.length>a;++a){var o=i[a],s=o.split(e,t.length);s&&(r.marked||(r.marked=[]),r.marked.push(s),s.attach(r))}return r},append:function(e){var t=this.text.length,n=e.marked,i=this.marked;if(this.text+=e.text,u(0,e.text.length,e.styles,this.styles),i)for(var r=0;i.length>r;++r)null==i[r].to&&(i[r].to=t);if(n&&n.length){i||(this.marked=i=[]);e:for(var r=0;n.length>r;++r){var a=n[r];if(!a.from)for(var o=0;i.length>o;++o){var s=i[o];if(s.to==t&&s.sameSet(a)){s.to=null==a.to?null:a.to+t,s.isDead()&&(s.detach(this),n.splice(r--,1));continue e}}i.push(a),a.attach(this),a.from+=t,null!=a.to&&(a.to+=t)}}},fixMarkEnds:function(e){var t=this.marked,n=e.marked;if(t)for(var i=0;t.length>i;++i){var r=t[i],a=null==r.to;if(a&&n)for(var o=0;n.length>o;++o)if(n[o].sameSet(r)){a=!1;break}a&&(r.to=this.text.length)}},fixMarkStarts:function(){var e=this.marked;if(e)for(var t=0;e.length>t;++t)null==e[t].from&&(e[t].from=0)},addMark:function(e){e.attach(this),null==this.marked&&(this.marked=[]),this.marked.push(e),this.marked.sort(function(e,t){return(e.from||0)-(t.from||0)})},highlight:function(e,t,n){var i,r=new a(this.text,n),o=this.styles,s=0,l=!1,u=o[0];for(""==this.text&&e.blankLine&&e.blankLine(t);!r.eol();){var c=e.token(r,t),h=this.text.slice(r.start,r.pos);if(r.start=r.pos,s&&o[s-1]==c?o[s-2]+=h:h&&(!l&&(o[s+1]!=c||s&&o[s-2]!=i)&&(l=!0),o[s++]=h,o[s++]=c,i=u,u=o[s]),r.pos>5e3){o[s++]=this.text.slice(r.pos),o[s++]=null;break}}return o.length!=s&&(o.length=s,l=!0),s&&o[s-2]!=i&&(l=!0),l||(5>o.length&&10>this.text.length?null:!1)},getTokenAt:function(e,t,n){for(var i=this.text,r=new a(i);n>r.pos&&!r.eol();){r.start=r.pos;var o=e.token(r,t)}return{start:r.start,end:r.pos,string:r.current(),className:o||null,state:t}},indentation:function(e){return O(this.text,null,e)},getHTML:function(e,t,n,i,r){function a(e,t){e&&(l&&H&&" "==e.charAt(0)&&(e=" "+e.slice(1)),l=!1,t?s.push('<span class="',t,'">',A(e).replace(/\t/g,i),"</span>"):s.push(A(e).replace(/\t/g,i)))}function o(){h&&(g+=1,b=h.length>g?h[g]:null)}var s=[],l=!0;n&&s.push(this.className?'<pre class="'+this.className+'">':"<pre>");var u=this.styles,c=this.text,h=this.marked;e==t&&(e=null);var d=c.length;if(null!=r&&(d=Math.min(r,d)),c||null!=r)if(h||null!=e){var p,f=0,m=0,v="",g=-1,b=null;for(o();d>f;){var _=d,y="";for(null!=e&&(e>f?_=e:(null==t||t>f)&&(y=" CodeMirror-selected",null!=t&&(_=Math.min(_,t))));b&&null!=b.to&&f>=b.to;)o();for(b&&(b.from>f?_=Math.min(_,b.from):(y+=" "+b.style,null!=b.to&&(_=Math.min(_,b.to))));;){var w=f+v.length,C=p;if(y&&(C=p?p+y:y),a(w>_?v.slice(0,_-f):v,C),w>=_){v=v.slice(_-f),f=_;break}f=w,v=u[m++],p="cm-"+u[m++]}}null!=e&&null==t&&a(" ","CodeMirror-selected")}else for(var m=0,x=0;d>x;m+=2){var E=u[m],p=u[m+1],S=E.length;x+S>d&&(E=E.slice(0,d-x)),x+=S,a(E,p&&"cm-"+p)}else a(" ",null!=e&&null==t?"CodeMirror-selected":null);return n&&s.push("</pre>"),s.join("")},cleanUp:function(){if(this.parent=null,this.marked)for(var e=0,t=this.marked.length;t>e;++e)this.marked[e].detach(this)}},c.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,n){for(var i=e,r=e+t;r>i;++i){var a=this.lines[i];if(this.height-=a.height,a.cleanUp(),a.handlers)for(var o=0;a.handlers.length>o;++o)n.push(a.handlers[o])}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,n){this.height+=n,this.lines.splice.apply(this.lines,[e,0].concat(t));for(var i=0,r=t.length;r>i;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;i>e;++e)if(n(this.lines[e]))return!0}},h.prototype={chunkSize:function(){return this.size},remove:function(e,t,n){this.size-=t;for(var i=0;this.children.length>i;++i){var r=this.children[i],a=r.chunkSize();if(a>e){var o=Math.min(t,a-e),s=r.height;if(r.remove(e,o,n),this.height-=s-r.height,a==o&&(this.children.splice(i--,1),r.parent=null),0==(t-=o))break;e=0}else e-=a}if(25>this.size-t){var l=[];this.collapse(l),this.children=[new c(l)]}},collapse:function(e){for(var t=0,n=this.children.length;n>t;++t)this.children[t].collapse(e)},insert:function(e,t){for(var n=0,i=0,r=t.length;r>i;++i)n+=t[i].height;this.insertHeight(e,t,n)},insertHeight:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0,r=this.children.length;r>i;++i){var a=this.children[i],o=a.chunkSize();if(o>=e){if(a.insertHeight(e,t,n),a.lines&&a.lines.length>50){for(;a.lines.length>50;){var s=a.lines.splice(a.lines.length-25,25),l=new c(s);a.height-=l.height,this.children.splice(i+1,0,l),l.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(10>=this.children.length)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new h(t);if(e.parent){e.size-=n.size,e.height-=n.height;var i=z(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var r=new h(e.children);r.parent=e,e.children=[r,n],e=r}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iter:function(e,t,n){this.iterN(e,t-e,n)},iterN:function(e,t,n){for(var i=0,r=this.children.length;r>i;++i){var a=this.children[i],o=a.chunkSize();if(o>e){var s=Math.min(t,o-e);if(a.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=o}}},v.prototype={addChange:function(e,t,n){this.undone.length=0;var i=+new Date,r=this.done[this.done.length-1];if(i-this.time>400||!r||r.start>e+t||r.start+r.added<e-r.added+r.old.length)this.done.push({start:e,added:t,old:n});else{var a=0;if(r.start>e){for(var o=r.start-e-1;o>=0;--o)r.old.unshift(n[o]);r.added+=r.start-e,r.start=e}else e>r.start&&(a=e-r.start,t+=a);for(var o=r.added-a,s=n.length;s>o;++o)r.old.push(n[o]);t>r.added&&(r.added=t)}this.time=i}},e.e_stop=w,e.e_preventDefault=_,e.e_stopPropagation=y,e.connect=E,S.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}};var U=function(){if(/MSIE [1-8]\b/.test(navigator.userAgent))return!1;var e=document.createElement("div");return"draggable"in e}(),V=/gecko\/\d{7}/i.test(navigator.userAgent),H=/MSIE \d/.test(navigator.userAgent),Y=/WebKit\//.test(navigator.userAgent),X="\n";(function(){var e=document.createElement("textarea");e.value="foo\nbar",e.value.indexOf("\r")>-1&&(X="\r\n")})(),null!=document.documentElement.getBoundingClientRect&&(k=function(e,t){try{var n=e.getBoundingClientRect();n={top:n.top,left:n.left}}catch(i){n={top:0,left:0}}if(!t)if(null==window.pageYOffset){var r=document.documentElement||document.body.parentNode;null==r.scrollTop&&(r=document.body),n.top+=r.scrollTop,n.left+=r.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n});var G=document.createElement("pre");"\na"==A("a")?A=function(e){return G.textContent=e,G.innerHTML.slice(1)}:"	"!=A("	")&&(A=function(e){return G.innerHTML="",G.appendChild(document.createTextNode(e)),G.innerHTML}),e.htmlEscape=A;var K=3!="\n\nb".split(/\n/).length?function(e){for(var t,n=0,i=[];(t=e.indexOf("\n",n))>-1;)i.push(e.slice(n,"\r"==e.charAt(t-1)?t-1:t)),n=t+1;return i.push(e.slice(n)),i}:function(e){return e.split(/\r?\n/)};e.splitLines=K;var J=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1};e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var $={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return e.keyNames=$,function(){for(var e=0;10>e;e++)$[e+48]=e+"";for(var e=65;90>=e;e++)$[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)$[e+111]=$[e+63235]="F"+e}(),e}();n.defineMode("css",function(e){function t(e,t){return o=t,e}function n(e,n){var o=e.next();return"@"==o?(e.eatWhile(/[\w\\\-]/),t("meta",e.current())):"/"==o&&e.eat("*")?(n.tokenize=i,i(e,n)):"<"==o&&e.eat("!")?(n.tokenize=r,r(e,n)):"="!=o?"~"!=o&&"|"!=o||!e.eat("=")?'"'==o||"'"==o?(n.tokenize=a(o),n.tokenize(e,n)):"#"==o?(e.eatWhile(/[\w\\\-]/),t("atom","hash")):"!"==o?(e.match(/^\s*\w*/),t("keyword","important")):/\d/.test(o)?(e.eatWhile(/[\w.%]/),t("number","unit")):/[,.+>*\/]/.test(o)?t(null,"select-op"):/[;{}:\[\]]/.test(o)?t(null,o):(e.eatWhile(/[\w\\\-]/),t("variable","variable")):t(null,"compare"):(t(null,"compare"),void 0)}function i(e,i){for(var r,a=!1;null!=(r=e.next());){if(a&&"/"==r){i.tokenize=n;break}a="*"==r}return t("comment","comment")}function r(e,i){for(var r,a=0;null!=(r=e.next());){if(a>=2&&">"==r){i.tokenize=n;break}a="-"==r?a+1:0}return t("comment","comment")}function a(e){return function(i,r){for(var a,o=!1;null!=(a=i.next())&&(a!=e||o);)o=!o&&"\\"==a;return o||(r.tokenize=n),t("string","string")}}var o,s=e.indentUnit;return{startState:function(e){return{tokenize:n,baseIndent:e||0,stack:[]}},token:function(e,t){if(e.eatSpace())return null;var n=t.tokenize(e,t),i=t.stack[t.stack.length-1];return"hash"==o&&"rule"==i?n="atom":"variable"==n&&("rule"==i?n="number":i&&"@media{"!=i||(n="tag")),"rule"==i&&/^[\{\};]$/.test(o)&&t.stack.pop(),"{"==o?"@media"==i?t.stack[t.stack.length-1]="@media{":t.stack.push("{"):"}"==o?t.stack.pop():"@media"==o?t.stack.push("@media"):"{"==i&&"comment"!=o&&t.stack.push("rule"),n},indent:function(e,t){var n=e.stack.length;return/^\}/.test(t)&&(n-="rule"==e.stack[e.stack.length-1]?2:1),e.baseIndent+n*s},electricChars:"}"}}),n.defineMIME("text/css","css"),n.defineMode("htmlmixed",function(e){function t(e,t){var n=o.token(e,t.htmlState);return"tag"==n&&">"==e.current()&&t.htmlState.context&&(/^script$/i.test(t.htmlState.context.tagName)?(t.token=r,t.localState=s.startState(o.indent(t.htmlState,"")),t.mode="javascript"):/^style$/i.test(t.htmlState.context.tagName)&&(t.token=a,t.localState=l.startState(o.indent(t.htmlState,"")),t.mode="css")),n}function i(e,t,n){var i=e.current(),r=i.search(t);return r>-1&&e.backUp(i.length-r),n}function r(e,n){return e.match(/^<\/\s*script\s*>/i,!1)?(n.token=t,n.curState=null,n.mode="html",t(e,n)):i(e,/<\/\s*script\s*>/,s.token(e,n.localState))}function a(e,n){return e.match(/^<\/\s*style\s*>/i,!1)?(n.token=t,n.localState=null,n.mode="html",t(e,n)):i(e,/<\/\s*style\s*>/,l.token(e,n.localState))}var o=n.getMode(e,{name:"xml",htmlMode:!0}),s=n.getMode(e,"javascript"),l=n.getMode(e,"css");return{startState:function(){var e=o.startState();return{token:t,localState:null,mode:"html",htmlState:e}},copyState:function(e){if(e.localState)var t=n.copyState(e.token==a?l:s,e.localState);return{token:e.token,localState:t,mode:e.mode,htmlState:n.copyState(o,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,n){return e.token==t||/^\s*<\//.test(n)?o.indent(e.htmlState,n):e.token==r?s.indent(e.localState,n):l.indent(e.localState,n)},compareStates:function(e,t){return o.compareStates(e.htmlState,t.htmlState)},electricChars:"/{}:"}}),n.defineMIME("text/html","htmlmixed"),n.defineMode("javascript",function(e,t){function n(e,t,n){return t.tokenize=n,n(e,t)}function i(e,t){for(var n,i=!1;null!=(n=e.next());){if(n==t&&!i)return!1;i=!i&&"\\"==n}return i}function r(e,t,n){return I=e,R=n,t}function a(e,t){var a=e.next();if('"'==a||"'"==a)return n(e,t,o(a));if(/[\[\]{}\(\),;\:\.]/.test(a))return r(a);if("0"==a&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),r("number","number");if(/\d/.test(a))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),r("number","number");if("/"==a)return e.eat("*")?n(e,t,s):e.eat("/")?(e.skipToEnd(),r("comment","comment")):t.reAllowed?(i(e,"/"),e.eatWhile(/[gimy]/),r("regexp","string")):(e.eatWhile(q),r("operator",null,e.current()));if("#"==a)return e.skipToEnd(),r("error","error");if(q.test(a))return e.eatWhile(q),r("operator",null,e.current());e.eatWhile(/[\w\$_]/);var l=e.current(),u=F.propertyIsEnumerable(l)&&F[l];return u&&t.kwAllowed?r(u.type,u.style,l):r("variable","variable",l)}function o(e){return function(t,n){return i(t,e)||(n.tokenize=a),r("string","string")}}function s(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize=a;break}i="*"==n}return r("comment","comment")}function l(e,t,n,i,r,a){this.indented=e,this.column=t,this.type=n,this.prev=r,this.info=a,null!=i&&(this.align=i)}function u(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function c(e,t,n,i,r){var a=e.cc;for(U.state=e,U.stream=r,U.marked=null,U.cc=a,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var o=a.length?a.pop():N?y:_;if(o(n,i)){for(;a.length&&a[a.length-1].lex;)a.pop()();return U.marked?U.marked:"variable"==n&&u(e,i)?"variable-2":t}}}function h(){for(var e=arguments.length-1;e>=0;e--)U.cc.push(arguments[e])}function d(){return h.apply(null,arguments),!0}function p(e){var t=U.state;if(t.context){U.marked="def";for(var n=t.localVars;n;n=n.next)if(n.name==e)return;t.localVars={name:e,next:t.localVars}}}function f(){U.state.context||(U.state.localVars=V),U.state.context={prev:U.state.context,vars:U.state.localVars}}function m(){U.state.localVars=U.state.context.vars,U.state.context=U.state.context.prev}function v(e,t){var n=function(){var n=U.state;n.lexical=new l(n.indented,U.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function g(){var e=U.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function b(e){return function(t){return t==e?d():";"==e?h():d(arguments.callee)}}function _(e){return"var"==e?d(v("vardef"),k,b(";"),g):"keyword a"==e?d(v("form"),y,_,g):"keyword b"==e?d(v("form"),_,g):"{"==e?d(v("}"),T,g):";"==e?d():"function"==e?d(j):"for"==e?d(v("form"),b("("),v(")"),M,b(")"),g,_,g):"variable"==e?d(v("stat"),x):"switch"==e?d(v("form"),y,v("}","switch"),b("{"),T,g,g):"case"==e?d(y,b(":")):"default"==e?d(b(":")):"catch"==e?d(v("form"),f,b("("),z,b(")"),_,g,m):h(v("stat"),y,b(";"),g)}function y(e){return W.hasOwnProperty(e)?d(C):"function"==e?d(j):"keyword c"==e?d(w):"("==e?d(v(")"),y,b(")"),g,C):"operator"==e?d(y):"["==e?d(v("]"),O(y,"]"),g,C):"{"==e?d(v("}"),O(S,"}"),g,C):d()}function w(e){return e.match(/[;\}\)\],]/)?h():h(y)}function C(e,t){return"operator"==e&&/\+\+|--/.test(t)?d(C):"operator"==e?d(y):";"!=e?"("==e?d(v(")"),O(y,")"),g,C):"."==e?d(E,C):"["==e?d(v("]"),y,b("]"),g,C):void 0:void 0}function x(e){return":"==e?d(g,_):h(C,b(";"),g)}function E(e){return"variable"==e?(U.marked="property",d()):void 0}function S(e){return"variable"==e&&(U.marked="property"),W.hasOwnProperty(e)?d(b(":"),y):void 0}function O(e,t){function n(i){return","==i?d(e,n):i==t?d():d(b(t))}return function(i){return i==t?d():h(e,n)}}function T(e){return"}"==e?d():h(_,T)}function k(e,t){return"variable"==e?(p(t),d(D)):d()}function D(e,t){return"="==t?d(y,D):","==e?d(k):void 0}function M(e){return"var"==e?d(k,L):";"==e?h(L):"variable"==e?d(P):h(L)}function P(e,t){return"in"==t?d(y):d(C,L)}function L(e,t){return";"==e?d(A):"in"==t?d(y):d(y,b(";"),A)}function A(e){")"!=e&&d(y)}function j(e,t){return"variable"==e?(p(t),d(j)):"("==e?d(v(")"),f,O(z,")"),g,_,m):void 0}function z(e,t){return"variable"==e?(p(t),d()):void 0}var I,R,B=e.indentUnit,N=t.json,F=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),i=e("keyword c"),r=e("operator"),a={type:"atom",style:"atom"};return{"if":t,"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":i,"break":i,"continue":i,"new":i,"delete":i,"throw":i,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":r,"typeof":r,"instanceof":r,"true":a,"false":a,"null":a,undefined:a,NaN:a,Infinity:a}}(),q=/[+\-*&%=<>!?|]/,W={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},U={state:null,column:null,marked:null,cc:null},V={name:"this",next:{name:"arguments"}};return g.lex=!0,{startState:function(e){return{tokenize:a,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new l((e||0)-B,0,"block",!1),localVars:null,context:null,indented:0}},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==I?n:(t.reAllowed="operator"==I||"keyword c"==I||I.match(/^[\[{}\(,;:]$/),t.kwAllowed="."!=I,c(t,n,I,R,e))},indent:function(e,t){if(e.tokenize!=a)return 0;var n=t&&t.charAt(0),i=e.lexical,r=i.type,o=n==r;return"vardef"==r?i.indented+4:"form"==r&&"{"==n?i.indented:"stat"==r||"form"==r?i.indented+B:"switch"!=i.info||o?i.align?i.column+(o?0:1):i.indented+(o?0:B):i.indented+(/^(?:case|default)\b/.test(t)?B:2*B)},electricChars:":{}"}}),n.defineMIME("text/javascript","javascript"),n.defineMIME("application/json",{name:"javascript",json:!0}),n.defineMode("xml",function(e,t){function n(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if("<"==r){if(e.eat("!"))return e.eat("[")?e.match("CDATA[")?n(a("atom","]]>")):null:e.match("--")?n(a("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(o(1))):null;if(e.eat("?"))return e.eatWhile(/[\w\._\-]/),t.tokenize=a("meta","?>"),"meta";b=e.eat("/")?"closeTag":"openTag",e.eatSpace(),g="";for(var s;s=e.eat(/[^\s\u00a0=<>\"\'\/?]/);)g+=s;return t.tokenize=i,"tag"}return"&"==r?(e.eatWhile(/[^;]/),e.eat(";"),"atom"):(e.eatWhile(/[^&<]/),null)}function i(e,t){var i=e.next();return">"==i||"/"==i&&e.eat(">")?(t.tokenize=n,b=">"==i?"endTag":"selfcloseTag","tag"):"="==i?(b="equals",null):/[\'\"]/.test(i)?(t.tokenize=r(i),t.tokenize(e,t)):(e.eatWhile(/[^\s\u00a0=<>\"\'\/?]/),"word")}function r(e){return function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=i;break}return"string"}}function a(e,t){return function(i,r){for(;!i.eol();){if(i.match(t)){r.tokenize=n;break}i.next()}return e}}function o(e){return function(t,i){for(var r;null!=(r=t.next());){if("<"==r)return i.tokenize=o(e+1),i.tokenize(t,i);if(">"==r){if(1==e){i.tokenize=n;break}return i.tokenize=o(e-1),i.tokenize(t,i)}}return"meta"}}function s(){for(var e=arguments.length-1;e>=0;e--)_.cc.push(arguments[e])}function l(){return s.apply(null,arguments),!0}function u(e,t){var n=C.doNotIndent.hasOwnProperty(e)||_.context&&_.context.noIndent;_.context={prev:_.context,tagName:e,indent:_.indented,startOfLine:t,noIndent:n}}function c(){_.context&&(_.context=_.context.prev)}function h(e){if("openTag"==e)return _.tagName=g,l(f,d(_.startOfLine));if("closeTag"==e){var t=!1;return t=_.context?_.context.tagName!=g:!0,t&&(y="error"),l(p(t))}return l()}function d(e){return function(t){return"selfcloseTag"==t||"endTag"==t&&C.autoSelfClosers.hasOwnProperty(_.tagName.toLowerCase())?l():"endTag"==t?(u(_.tagName,e),l()):l()}}function p(e){return function(t){return e&&(y="error"),"endTag"==t?(c(),l()):(y="error",l(arguments.callee))}}function f(e){return"word"==e?(y="attribute",l(f)):"equals"==e?l(m,f):"string"==e?(y="error",l(f)):s()}function m(e){return"word"==e&&C.allowUnquoted?(y="string",l()):"string"==e?l(v):s()}function v(e){return"string"==e?l(v):s()}var g,b,_,y,w=e.indentUnit,C=t.htmlMode?{autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,area:!0},doNotIndent:{pre:!0},allowUnquoted:!0}:{autoSelfClosers:{},doNotIndent:{},allowUnquoted:!1},x=t.alignCDATA;return{startState:function(){return{tokenize:n,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(e,t){if(e.sol()&&(t.startOfLine=!0,t.indented=e.indentation()),e.eatSpace())return null;y=b=g=null;var n=t.tokenize(e,t);if(t.type=b,(n||b)&&"comment"!=n)for(_=t;;){var i=t.cc.pop()||h;if(i(b||n))break}return t.startOfLine=!1,y||n},indent:function(e,t,r){var a=e.context;if(e.tokenize!=i&&e.tokenize!=n||a&&a.noIndent)return r?r.match(/^(\s*)/)[0].length:0;if(x&&/<!\[CDATA\[/.test(t))return 0;for(a&&/^<\//.test(t)&&(a=a.prev);a&&!a.startOfLine;)a=a.prev;return a?a.indent+w:0},compareStates:function(e,t){if(e.indented!=t.indented||e.tokenize!=t.tokenize)return!1;for(var n=e.context,i=t.context;;n=n.prev,i=i.prev){if(!n||!i)return n==i;if(n.tagName!=i.tagName)return!1}},electricChars:"/"}}),n.defineMIME("application/xml","xml"),n.defineMIME("text/html",{name:"xml",htmlMode:!0})}}),montageDefine("727bebb","composer/translate-composer",{dependencies:["montage","composer/composer","core/event/event-manager"],factory:function(e,t){var n=(e("montage").Montage,e("composer/composer").Composer),i=e("core/event/event-manager").defaultEventManager,r=t.TranslateComposer=n.specialize({_NATIVE_ELEMENTS:{value:["A","IFRAME","EMBED","OBJECT","VIDEO","AUDIO","CANVAS","LABEL","INPUT","BUTTON","SELECT","TEXTAREA","KEYGEN","DETAILS","COMMAND"]},_WHEEL_POINTER:{value:"wheel",writable:!1},_externalUpdate:{value:!0},isAnimating:{value:!1},isMoving:{value:!1},frame:{value:function(){this.isAnimating&&this._animationInterval(),this._externalUpdate=!1}},_pointerSpeedMultiplier:{value:1},pointerSpeedMultiplier:{get:function(){return this._pointerSpeedMultiplier},set:function(e){this._pointerSpeedMultiplier=e}},pointerStartEventPosition:{value:null},_shouldDispatchTranslate:{value:!1},_isSelfUpdate:{value:!1},_allowFloats:{value:!1},allowFloats:{get:function(){return this._allowFloats},set:function(e){this._allowFloats!==e&&(this._allowFloats=e,this.translateX=this._translateX,this.translateY=this._translateY)}},_translateX:{value:0},translateX:{get:function(){return this._translateX
},set:function(e){if("vertical"===this._axis)this._translateX=this._minTranslateX||0;else{var t=isNaN(e)?0:this._allowFloats?parseFloat(e):e>>0;null!==this._minTranslateX&&this._minTranslateX>t&&(t=this._minTranslateX),null!==this._maxTranslateX&&t>this._maxTranslateX&&(t=this._maxTranslateX),this._isSelfUpdate||(this.isAnimating=!1),this._translateX=t}}},_translateY:{value:0},translateY:{get:function(){return this._translateY},set:function(e){if("horizontal"===this._axis)this._translateY=this._minTranslateY||0;else{var t=isNaN(e)?0:this._allowFloats?parseFloat(e):e>>0;null!==this._minTranslateY&&this._minTranslateY>t&&(t=this._minTranslateY),null!==this._maxTranslateY&&t>this._maxTranslateY&&(t=this._maxTranslateY),this._isSelfUpdate||(this.isAnimating=!1),this._translateY=t}}},_minTranslateX:{value:null},minTranslateX:{get:function(){return this._minTranslateX},set:function(e){null!==e&&(e=parseFloat(e)),this._minTranslateX!=e&&(null!==e&&e>this._translateX&&(this.translateX=e),this._minTranslateX=e)}},_maxTranslateX:{value:null},maxTranslateX:{get:function(){return this._maxTranslateX},set:function(e){null!==e&&(e=parseFloat(e)),this._maxTranslateX!=e&&(null!==e&&this._translateX>e&&(this.translateX=e),this._maxTranslateX=e)}},_minTranslateY:{value:null},minTranslateY:{get:function(){return this._minTranslateY},set:function(e){null!==e&&(e=parseFloat(e)),this._minTranslateY!=e&&(null!==e&&e>this._translateY&&(this.translateY=e),this._minTranslateY=e)}},_maxTranslateY:{value:null},maxTranslateY:{get:function(){return this._maxTranslateY},set:function(e){null!==e&&(e=parseFloat(e)),this._maxTranslateY!=e&&(null!==e&&this._translateY>e&&(this.translateY=e),this._maxTranslateY=e)}},_axis:{value:"both"},axis:{get:function(){return this._axis},set:function(e){switch(e){case"vertical":case"horizontal":this._axis=e,this.translateX=this._translateX,this.translateY=this._translateY;break;default:this._axis="both"}}},invertAxis:{depends:["invertXAxis","invertYAxis"],get:function(){return this._invertXAxis===this._invertYAxis?this._invertXAxis:null},set:function(e){this.invertXAxis=e,this.invertYAxis=e}},_invertXAxis:{value:!1},invertXAxis:{get:function(){return this._invertXAxis},set:function(e){this._invertXAxis=!!e}},_invertYAxis:{value:!1},invertYAxis:{get:function(){return this._invertYAxis},set:function(e){this._invertYAxis=!!e}},startTranslateSpeed:{value:500},startTranslateRadius:{value:8},_hasMomentum:{value:!0},hasMomentum:{get:function(){return this._hasMomentum},set:function(e){this._hasMomentum=e?!0:!1}},__momentumDuration:{value:650},_momentumDuration:{get:function(){return this.__momentumDuration},set:function(e){this.__momentumDuration=isNaN(e)?1:e>>0,1>this.__momentumDuration&&(this.__momentumDuration=1)}},_pointerX:{value:null},_pointerY:{value:null},_touchIdentifier:{value:null},_isFirstMove:{value:!1},_start:{value:function(e,t,n){this.pointerStartEventPosition={pageX:e,pageY:t,target:n},this._pointerX=e,this._pointerY=t,window.Touch?(document.addEventListener("touchend",this,!0),this._element.addEventListener("touchmove",this,!1)):(document.addEventListener("mouseup",this,!0),this._element.addEventListener("mousemove",this,!1)),this.isAnimating&&(this.isAnimating=!1,this._dispatchTranslateEnd()),this._isFirstMove=!0}},_observedPointer:{value:null},_shouldPreventDefault:{value:function(e){return!!e.target.tagName&&-1===r._NATIVE_ELEMENTS.indexOf(e.target.tagName)&&!e.target.isContentEditable}},captureMousedown:{value:function(e){0===e.button&&(this._observedPointer="mouse",this._start(e.clientX,e.clientY,e.target))}},handleMousedown:{value:function(e){0!==e.button||this.eventManager.componentClaimingPointer(this._observedPointer)||this.eventManager.claimPointer(this._observedPointer,this)}},handleMousemove:{value:function(e){this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?(e.preventDefault(),this._firstMove()):("both"===this.axis||this._analyzeMovement(e))&&this._stealPointer()&&(e.preventDefault(),this._firstMove())}},captureMousemove:{value:function(e){this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?(e.preventDefault(),this._move(e.clientX,e.clientY)):("both"===this.axis||this._analyzeMovement(e))&&this._stealPointer()&&(e.preventDefault(),this._move(e.clientX,e.clientY))}},captureMouseup:{value:function(e){this._end(e)}},_releaseInterest:{value:function(){window.Touch?(document.removeEventListener("touchend",this,!0),this._isFirstMove?this._element.removeEventListener("touchmove",this,!1):document.removeEventListener("touchmove",this,!0)):(document.removeEventListener("mouseup",this,!0),this._isFirstMove?this._element.removeEventListener("mousemove",this,!1):document.removeEventListener("mousemove",this,!0)),this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null}},captureTouchstart:{value:function(e){null!==this._observedPointer&&this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)||e.targetTouches&&1===e.targetTouches.length&&(this._observedPointer=e.targetTouches[0].identifier,this._start(e.targetTouches[0].clientX,e.targetTouches[0].clientY,e.targetTouches[0].target))}},handleTouchstart:{value:function(e){this.eventManager.componentClaimingPointer(this._observedPointer)||e.targetTouches&&1===e.targetTouches.length&&(this._shouldPreventDefault(e)&&e.preventDefault(),this.eventManager.claimPointer(this._observedPointer,this))}},handleTouchmove:{value:function(e){this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?(e.preventDefault(),this._firstMove()):("both"===this.axis||this._analyzeMovement(e))&&this._stealPointer()&&(e.preventDefault(),this._firstMove())}},captureTouchmove:{value:function(e){for(var t=0,n=e.changedTouches.length;n>t&&e.changedTouches[t].identifier!==this._observedPointer;)t++;n>t&&(this.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?(e.preventDefault(),this._move(e.changedTouches[t].clientX,e.changedTouches[t].clientY)):this._analyzeMovement(e.changedTouches[t]))}},captureTouchend:{value:function(e){for(var t=0,n=e.changedTouches.length;n>t&&e.changedTouches[t].identifier!==this._observedPointer;)t++;n>t&&this._end(e.changedTouches[t])}},_analyzeMovement:{value:function(e){var t=e.velocity;if(t){var n,i,r,a,o,s,l,u,c=.7853981633974483,h=2.356194490192345,d=-2.356194490192345,p=-.7853981633974483;if(s=t.speed,0!==t.speed&&!isNaN(t.speed))if(o=t.angle,"horizontal"===this.axis){if(r=c>=o&&o>=p,a=o>=h||d>=o,r||a)return this._stealPointer()}else if("vertical"===this.axis){if(n=p>=o&&o>=d,i=o>=c&&h>=o,n||i)return this._stealPointer()}else{if(s>=this.startTranslateSpeed)return this._stealPointer();if(l=this.pointerStartEventPosition.pageX-e.pageX,u=this.pointerStartEventPosition.pageY-e.pageY,l*l+u*u>this.startTranslateRadius*this.startTranslateRadius)return this._stealPointer()}}}},_stealPointer:{value:function(){return this.eventManager.claimPointer(this._observedPointer,this)}},_translateEndTimeout:{value:null},captureWheel:{value:function(){this.eventManager.componentClaimingPointer(this._WHEEL_POINTER)||this.eventManager.claimPointer(this._WHEEL_POINTER,this.component)}},handleWheel:{value:function(e){var t=this;if(this.eventManager.isPointerClaimedByComponent(this._WHEEL_POINTER,this.component)){var n=this._translateY,i=e.wheelDeltaY||-e.deltaY||0;this._dispatchTranslateStart(),this.translateY=this._translateY-20*i/120,this._dispatchTranslate(),window.clearTimeout(this._translateEndTimeout),this._translateEndTimeout=window.setTimeout(function(){t._dispatchTranslateEnd()},400),n!==this._translateY&&this._shouldPreventDefault(e)&&e.preventDefault(),this.eventManager.forfeitPointer(this._WHEEL_POINTER,this.component)}}},_firstMove:{value:function(){this._isFirstMove&&(this._dispatchTranslateStart(this._translateX,this._translateY),this._isFirstMove=!1,this.isMoving=!0,window.Touch?(document.addEventListener("touchmove",this,!0),this._element.removeEventListener("touchmove",this,!1)):(document.addEventListener("mousemove",this,!0),this._element.removeEventListener("mousemove",this,!1)))}},_move:{value:function(e,t){var n;this._isSelfUpdate=!0,"vertical"!=this._axis&&(n=this._invertXAxis?this._pointerX-e:e-this._pointerX,this.translateX+=n*this._pointerSpeedMultiplier),"horizontal"!=this._axis&&(n=this._invertYAxis?this._pointerY-t:t-this._pointerY,this.translateY+=n*this._pointerSpeedMultiplier),this._isSelfUpdate=!1,this._pointerX=e,this._pointerY=t,this._shouldDispatchTranslate&&this._dispatchTranslate()}},_bezierTValue:{value:function(e,t,n,i,r){var a,o,s,l,u=1-3*i+3*t,c=3*i-6*t,h=3*t,d=.5;for(o=0;10>o;o++)l=d*d,a=3*u*l+2*c*d+h,s=1-d,d-=(3*(s*s*d*t+s*l*i)+l*d-e)/a;return l=d*d,s=1-d,3*(s*s*d*n+s*l*r)+l*d}},_dispatchTranslateStart:{value:function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent("translateStart",!0,!0,null),n.translateX=e,n.translateY=t,n.scroll=0,this.dispatchEvent(n)}},_dispatchTranslateEnd:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translateEnd",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,e.scroll=0,this.dispatchEvent(e)}},_dispatchTranslate:{value:function(){var e=document.createEvent("CustomEvent");e.initCustomEvent("translate",!0,!0,null),e.translateX=this._translateX,e.translateY=this._translateY,e.scroll=0,this.dispatchEvent(e)}},animateBouncingX:{value:!1,enumerable:!1},startTimeBounceX:{value:!1,enumerable:!1},animateBouncingY:{value:!1,enumerable:!1},startTimeBounceY:{value:!1,enumerable:!1},animateMomentum:{value:!1,enumerable:!1},startTime:{value:null,enumerable:!1},startX:{value:null,enumerable:!1},posX:{value:null,enumerable:!1},endX:{value:null,enumerable:!1},startY:{value:null,enumerable:!1},posY:{value:null,enumerable:!1},endY:{value:null,enumerable:!1},translateStrideX:{value:null},translateStrideY:{value:null},translateStrideDuration:{value:330},_animationInterval:{value:function(){var e,t,n,i,r=Date.now(),a=!1;this.animateMomentum&&(e=r-this.startTime,this.__momentumDuration>e?(this.posX=this.startX-(this.momentumX+this.momentumX*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this.posY=this.startY-(this.momentumY+this.momentumY*(this.__momentumDuration-e)/this.__momentumDuration)*e/1e3/2,this.translateStrideX&&null===this.startStrideXTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.posX-this.endX)<.75*this.translateStrideX)&&(this.startStrideXTime=r),this.translateStrideY&&null===this.startStrideYTime&&(this.__momentumDuration-e<this.translateStrideDuration||Math.abs(this.posY-this.endY)<.75*this.translateStrideY)&&(this.startStrideYTime=r)):this.animateMomentum=!1),t=Math.round(this.endX/this.translateStrideX),this.startStrideXTime&&r-this.startStrideXTime>0&&(r-this.startStrideXTime<this.translateStrideDuration?(e=this._bezierTValue((r-this.startStrideXTime)/this.translateStrideDuration,.275,0,.275,1),this.posX=this.posX*(1-e)+t*this.translateStrideX*e,a=!0):this.posX=t*this.translateStrideX),t=Math.round(this.endY/this.translateStrideY),this.startStrideYTime&&r-this.startStrideYTime>0&&(r-this.startStrideYTime<this.translateStrideDuration?(e=this._bezierTValue((r-this.startStrideYTime)/this.translateStrideDuration,.275,0,.275,1),this.posY=this.posY*(1-e)+t*this.translateStrideY*e,a=!0):this.posY=t*this.translateStrideY),n=this.posX,i=this.posY,this._isSelfUpdate=!0,this.translateX=n,this.translateY=i,this._shouldDispatchTranslate&&this._dispatchTranslate(),this._isSelfUpdate=!1,this.isAnimating=this.animateMomentum||a,this.isAnimating?this.needsFrame=!0:this._dispatchTranslateEnd()}},_end:{value:function(e){this.startTime=Date.now(),this.endX=this.posX=this.startX=this._translateX,this.endY=this.posY=this.startY=this._translateY,this._hasMomentum&&(e.velocity.speed>40||this.translateStrideX||this.translateStrideY)?(this.momentumX="vertical"!=this._axis?e.velocity.x*this._pointerSpeedMultiplier*(this._invertXAxis?1:-1):0,this.momentumY="horizontal"!=this._axis?e.velocity.y*this._pointerSpeedMultiplier*(this._invertYAxis?1:-1):0,this.endX=this.startX-this.momentumX*this.__momentumDuration/2e3,this.endY=this.startY-this.momentumY*this.__momentumDuration/2e3,this.startStrideXTime=null,this.startStrideYTime=null,this.animateMomentum=!0):this.animateMomentum=!1,this.animateMomentum?this._animationInterval():this._isFirstMove||(this.isMoving=!1,this._dispatchTranslateEnd()),this._releaseInterest()}},surrenderPointer:{value:function(){return!this.isMoving}},eventManager:{get:function(){return i}},load:{value:function(){if(window.Touch)this._element.addEventListener("touchstart",this,!0),this._element.addEventListener("touchstart",this,!1);else{this._element.addEventListener("mousedown",this,!0),this._element.addEventListener("mousedown",this,!1);var e;e=void 0!==window.onwheel?"wheel":"mousewheel",this._element.addEventListener(e,this,!1),this._element.addEventListener(e,this,!0)}this.eventManager.isStoringPointerEvents=!0}},addEventListener:{value:function(e,t,i){n.addEventListener.call(this,e,t,i),"translate"===e&&(this._shouldDispatchTranslate=!0)}}});r.prototype.handleMousewheel=r.prototype.handleWheel,r.prototype.captureMousewheel=r.prototype.captureWheel}}),montageDefine("727bebb","ui/repetition.reel/repetition",{dependencies:["montage","ui/component","core/template","core/range-controller","core/promise","collections/map","collections/set","frb/observers"],factory:function(e,t){var n=e("montage").Montage,i=e("ui/component").Component;e("core/template").Template;var r=e("core/range-controller").RangeController,a=e("core/promise").Promise,o=e("collections/map"),s=e("collections/set"),l=e("frb/observers"),u=l.observeProperty,c=l.observeKey,h=t.Iteration=n.specialize({repetition:{value:null},controller:{value:null},object:{value:null},selected:{value:null},_fragment:{value:null},_childComponents:{value:null},index:{value:null},_drawnIndex:{value:null},active:{value:null},isFirst:{value:null},isLast:{value:null},isEven:{value:null},isOdd:{value:null},_noTransition:{value:null},constructor:{value:function h(){this.super(),this.repetition=null,this.controller=null,this.content=null,this.defineBinding("object",{"<->":"content"}),this.defineBinding("content.defined() ? selected : null",{"<->":"repetition.contentController._selection.has(content)"}),this._fragment=null,this._childComponents=null,this.index=null,this._drawnIndex=null,this.active=!1,this.defineBinding("active",{"<->":"repetition.activeIterations.has(())"}),this.defineBinding("isFirst",{"<-":"index == 0"}),this.defineBinding("isLast",{"<-":"index == repetition.iterations.length - 1"}),this.defineBinding("isEven",{"<-":"index % 2 == 0"}),this.defineBinding("isOdd",{"<-":"index % 2 != 0"}),this._noTransition=!1,this.addOwnPropertyChangeListener("active",this),this.addOwnPropertyChangeListener("selected",this),this.addOwnPropertyChangeListener("_noTransition",this),this.addPathChangeListener("index.defined() && _childComponents.defined()",this,"handleComponentModelChange"),this.cachedFirstElement=null}},initWithRepetition:{value:function(e){return this.repetition=e,this}},recycle:{value:function(){this.index=null,this.content=null,this._noTransition=!0}},injectIntoDocument:{value:function(e){null!==this._drawnIndex&&this.retractFromDocument();var t=this,n=this.repetition,i=n.element,r=n._boundaries,a=i.ownerDocument.createTextNode(""),o=r[e];r.splice(e,0,a),i.insertBefore(a,o),i.insertBefore(this._fragment,o);for(var s=this._childComponents.length,l=function(e){e.target.removeEventListener("firstDraw",l,!1),s--,s||t.forEachElement(function(e){n._iterationForElement.set(e,t)})},u=0;this._childComponents.length>u;u++){var c=this._childComponents[u];c.addEventListener("firstDraw",l,!1),c.needsDraw=!0}n._drawnIterations.splice(e,0,this),n._updateDrawnIndexes(e),n._addDirtyClassListIteration(this)}},retractFromDocument:{value:function(){var e=this._drawnIndex,t=this.repetition,n=t.element,i=t._boundaries[e],r=t._boundaries[e+1];t._boundaries.splice(e,1);for(var a=this._fragment,o=i.nextSibling;o!=r;){var s=o.nextSibling;n.removeChild(o),a.appendChild(o),o=s}n.removeChild(i),this._drawnIndex=null,t._drawnIterations.splice(e,1),t._updateDrawnIndexes(e)}},handleComponentModelChange:{value:function(e){e?this._childComponents.forEach(this.repetition.addChildComponent,this.repetition):this._childComponents&&this._childComponents.forEach(this.repetition.removeChildComponent,this.repetition)}},handlePropertyChange:{value:function(){this.repetition&&(this.repetition._addDirtyClassListIteration(this),this.repetition.needsDraw=!0)}},forEachElement:{value:function(e,t){var n=this.repetition,i=this._drawnIndex;if(null!=i)for(var r=n._boundaries[i];r!==n._boundaries[i+1];r=r.nextSibling)1===r.nodeType&&e.call(t,r)}},firstElement:{get:function(){var e=this.repetition,t=this._drawnIndex;if(null!=t)for(var n=e._boundaries[t];n!==e._boundaries[t+1];n=n.nextSibling)if(1===n.nodeType)return this.cachedFirstElement=n,n}},cachedFirstElement:{value:null}});t.Repetition=i.specialize({initWithContent:{value:function(e){return this.content=e,this}},initWithContentController:{value:function(e){return this.contentController=e,this}},content:{get:function(){return this.getPath("contentController.content")},set:function(e){this.contentController=(new r).initWithContent(e)}},contentController:{value:null},isSelectionEnabled:{value:null},selection:{value:null},selectedIterations:{value:null},selectedIndexes:{value:null},activeIterations:{value:null},iterations:{value:null},currentIteration:{value:null},contentAtCurrentIteration:{value:null},hasTemplate:{value:!1},_iterationTemplate:{value:null},clonesChildComponents:{value:!0},constructor:{value:function(){this.super(),this.contentController=null,this.organizedContent=[],this.defineBinding("organizedContent.rangeContent()",{"<-":"contentController.organizedContent"}),this.isSelectionEnabled=!1,this.defineBinding("selection",{"<->":"contentController.selection"}),this.defineBinding("selectedIterations",{"<-":"iterations.filter{selected}"}),this.defineBinding("selectedIndexes",{"<-":"selectedIterations.map{index}"}),this._iterationTemplate=null,this.addPathChangeListener(this._setupRequirements,this,"_handleSetupRequirementsChange"),this.addPathChangeListener("innerTemplate",this,"_handleInnerTemplateChange"),this.iterations=[],this._drawnIterations=[],this._freeIterations=[],this._contentForIteration=o(),this._iterationForElement=o(),this.currentIteration=null,this._templateId=null,this._iterationCreationPromise=a.resolve(),this._boundaries=[],this._dirtyClassListIterations=s(),this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._initialContentDrawn=!1,this.addOwnPropertyChangeListener("isSelectionEnabled",this),this._selectionPointer=null,this.activeIterations=[]}},_setupRequirements:{value:"[!_iterationTemplate.defined(),!_newDomContent.defined(),!_shouldClearDomContentOnNextDraw,_isComponentExpanded,_ownerDocumentPart.defined()].every{}"},_handleSetupRequirementsChange:{value:function(e){e&&this._setupIterationTemplate()}},_handleInnerTemplateChange:{value:function(e){this._iterationTemplate&&this._teardownIterationTemplate(),e&&this.getPath(this._setupRequirements)&&this._setupIterationTemplate()}},cleanupDeletedComponentTree:{value:function(e){this.innerTemplate=null,e&&this.cancelBindings()}},expandComponent:{value:function(){return this._isComponentExpanded=!0,a.resolve()}},_setupIterationTemplate:{value:function(){var e=this;e.innerTemplate.hasParameters()?(e._iterationTemplate=e.innerTemplate.clone(),e._expandIterationTemplateParameters()):e._iterationTemplate=e.innerTemplate;for(var t,n=e.childComponents,i=n.length-1;t=n[i--];)t.detachFromParentComponent(),t.needsDraw=!1,t.cleanupDeletedComponentTree(!0);e.handleOrganizedContentRangeChange(e.organizedContent,[],0),e.organizedContent.addRangeChangeListener(e,"organizedContent"),e._canDrawInitialContent=!0,e.needsDraw=!0}},_teardownIterationTemplate:{value:function(){this.organizedContent.removeRangeChangeListener(this,"organizedContent"),this.handleOrganizedContentRangeChange([],this.organizedContent,0);for(var e=0;this._freeIterations.length>e;e++)for(var t=this._freeIterations[e],n=0;t._childComponents.length>n;n++){var i=t._childComponents[n];this.removeChildComponent(i),i.cleanupDeletedComponentTree(!0)}this._iterationTemplate=null,this._freeIterations.clear(),this._contentForIteration.clear(),this._iterationForElement.clear(),this.currentIteration=null,this._templateId=null,this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._selectionPointer=null,this.activeIterations.clear(),this._dirtyClassListIterations.clear()}},_expandIterationTemplateParameters:{value:function(){for(var e,t,n,i,r,a,o,s,l,u=this._iterationTemplate,c=this;u.hasParameters();){c=c.ownerComponent,e=c._ownerDocumentPart.template,i=c._ownerDocumentPart.objects,a=u.expandParameters(e,c),n=u.getSerialization().getExternalObjectLabels(),r=u.getInstances(),s=a.labels,t=a.labelsCollisions;for(var h,d=0;h=s[d];d++)o=t&&h in t?t[h]:h,n.indexOf(o)>=0?r[o]=i[h]:(l=e.getObjectMetadata(h),l.owner||(l.owner=i.owner),u.setObjectMetadata(o,l.require,l.label,l.owner))}}},_iterationCreationPromise:{value:null},_createIteration:{value:function(){var e=this,t=(new this.Iteration).initWithRepetition(this);return this._iterationCreationPromise=this._iterationCreationPromise.then(function(){var n=e.element.ownerDocument;e.currentIteration=t;var i=e._iterationTemplate.instantiate(n).then(function(n){n.loadComponentTree().then(function(){t._fragment=n.fragment,t._childComponents=n.childComponents,e.constructIteration(t)}).done(),e.currentIteration=null});return i.done(),i.then(null,function(){})}),this._requestedIterations++,t}},constructIteration:{value:function(){this._createdIterations++,this._createdIterations>=this._requestedIterations&&(this.needsDraw=!0,this._canDraw=!0)}},observeProperty:{value:function(e,t,n){return"contentAtCurrentIteration"===e||"objectAtCurrentIteration"===e?c(this._contentForIteration,this.currentIteration,t,n):"currentIteration"===e?t(this.currentIteration):u(this,e,t,n)}},makePropertyObservable:{value:function(e){return"currentIteration"!==e?n.makePropertyObservable.call(this,e):void 0}},_controllerIterations:{value:null},_drawnIterations:{value:null},_freeIterations:{value:null},_contentForIteration:{value:null},handleOrganizedContentRangeChange:{value:function(e,t,n){var i=this.iterations.splice(n,t.length);for(i.forEach(function(e){e.recycle()}),this._freeIterations.addEach(i);this._freeIterations.length<e.length;)this._freeIterations.push(this._createIteration());this.iterations.swap(n,0,e.map(function(e){var t=this._freeIterations.pop();return t.content=e,this._contentForIteration.set(t,e),t},this)),this._updateIndexes(n),this.needsDraw=!0}},_updateIndexes:{value:function(e){for(var t=this.iterations;t.length>e;e++)t[e].index=e}},_addDirtyClassListIteration:{value:function(e){e.forEachElement(function(t){var n;t&&(n=t.component)?(n.classList[e.active?"add":"remove"]("active"),n.classList[e.selected?"add":"remove"]("selected"),n.classList.remove("no-transition")):this._dirtyClassListIterations.add(e)},this)}},canDraw:{value:function(){var e=this.canDrawGate.value;return e=e&&this._requestedIterations<=this._createdIterations,e=e&&(this._initialContentDrawn||this._canDrawInitialContent)}},_boundaries:{value:null},_dirtyClassListIterations:{value:null},_requestedIterations:{value:null},_createdIterations:{value:null},_canDrawInitialContent:{value:null},_initialContentDrawn:{value:null},draw:{value:function(){if(this.canDraw()){this._initialContentDrawn||(this._drawInitialContent(),this._initialContentDrawn=!0);for(var e=this._drawnIterations.length-1;e>=0;e--)null===this._drawnIterations[e].index&&this._drawnIterations[e].retractFromDocument();for(var e=0;this.iterations.length>e;e++){var t=this.iterations[e];t._drawnIndex!==t.index&&t.injectIntoDocument(e)}var n=this._dirtyClassListIterations.toArray();this._dirtyClassListIterations.clear(),n.forEach(function(e){e.forEachElement(function(t){t.component||(t.classList[e.active?"add":"remove"]("active"),t.classList[e.selected?"add":"remove"]("selected"),t.classList.remove("no-transition"))},this)},this)}}},_drawInitialContent:{value:function(){var e=this.element;e.innerHTML="";var t=e.ownerDocument.createTextNode("");e.appendChild(t),this._boundaries.push(t)}},_updateDrawnIndexes:{value:function(e){for(var t=this._drawnIterations;t.length>e;e++)t[e]._drawnIndex=e}},_selectionPointer:{value:null},handleIsSelectionEnabledChange:{value:function(e){e?this._enableSelectionTracking():this._disableSelectionTracking()}},_enableSelectionTracking:{value:function(){this.element.addEventListener("touchstart",this,!0),this.element.addEventListener("mousedown",this,!0)}},_disableSelectionTracking:{value:function(){this.element.removeEventListener("touchstart",this,!0),this.element.removeEventListener("mousedown",this,!0)}},_observeSelectionPointer:{value:function(e){this._selectionPointer=e,this.eventManager.claimPointer(e,this);var t=this.element.ownerDocument;t.addEventListener("touchend",this,!1),t.addEventListener("touchcancel",this,!1),t.addEventListener("mouseup",this,!1)}},_ignoreSelectionPointer:{value:function(){this.eventManager.isPointerClaimedByComponent(this._selectionPointer,this)&&this.eventManager.forfeitPointer(this._selectionPointer,this),this._selectionPointer=null,this.activeIterations.clear();var e=this.element.ownerDocument;e.removeEventListener("touchend",this,!1),e.removeEventListener("touchcancel",this,!1),e.removeEventListener("mouseup",this,!1)}},captureMousedown:{value:function(e){this._observeSelectionPointer("mouse");var t=this._findIterationContainingElement(e.target);t?t.active=!0:this._ignoreSelectionPointer()}},captureTouchstart:{value:function(e){if(null==this._selectionPointer){this._observeSelectionPointer(e.changedTouches[0].identifier);var t=this._findIterationContainingElement(e.target);t?t.active=!0:this._ignoreSelectionPointer()}}},handleTouchend:{value:function(e){for(var t=0;e.changedTouches.length>t&&!this._endSelectionOnTarget(e.changedTouches[t].identifier,e.target);t++);}},handleTouchcancel:{value:function(){this._ignoreSelectionPointer()}},handleMouseup:{value:function(e){this._endSelectionOnTarget("mouse",e.target)}},_endSelectionOnTarget:{value:function(e,t){if(e===this._selectionPointer){if(this.eventManager.isPointerClaimedByComponent(this._selectionPointer,this)){var n=this._findIterationContainingElement(t);n&&(n.active=!1,n.selected||(n.selected=!0))}return this._ignoreSelectionPointer(),!0}}},_findIterationContainingElement:{value:function(e){for(var t;e;){if(e===this.element)return this._iterationForElement.get(t);t=e,e=e.parentNode}}},Iteration:{value:h,serializable:!1}})}}),montageDefine("727bebb","composer/press-composer",{dependencies:["montage","composer/composer","core/event/mutable-event"],factory:function(e,t){var n=e("montage").Montage,i=e("composer/composer").Composer,r=e("core/event/mutable-event").MutableEvent,a=t.PressComposer=i.specialize({load:{value:function(){window.Touch?this._element.addEventListener("touchstart",this,!0):this._element.addEventListener("mousedown",this,!0)}},unload:{value:function(){window.Touch?this._element.removeEventListener("touchstart",this,!0):this._element.removeEventListener("mousedown",this,!0)}},delegate:{value:null},cancelPress:{value:function(){return this._state===a.PRESSED?(this._dispatchPressCancel(),this._endInteraction(),!0):!1}},addEventListener:{value:function(e,t,n){i.addEventListener.call(this,e,t,n),"longPress"===e&&(this._shouldDispatchLongPress=!0)}},UNPRESSED:{value:0},PRESSED:{value:1},CANCELLED:{value:2},_state:{enumerable:!1,value:0},state:{get:function(){return this._state}},_shouldDispatchLongPress:{enumerable:!1,value:!1},_longPressThreshold:{enumerable:!1,value:1e3},longPressThreshold:{get:function(){return this._longPressThreshold},set:function(e){this._longPressThreshold!==e&&(this._longPressThreshold=e)}},_longPressTimeout:{enumberable:!1,value:null},_observedPointer:{enumerable:!1,value:null},_startInteraction:{enumerable:!1,value:function(e){if("enabled"in this.component&&!this.component.enabled||null!==this._observedPointer)return!1;var t;"touchstart"===e.type?(t=e.changedTouches.length,1===t&&(this._observedPointer=e.changedTouches[0].identifier),document.addEventListener("touchend",this,!1),document.addEventListener("touchcancel",this,!1)):"mousedown"===e.type&&(this._observedPointer="mouse",document.addEventListener("mouseup",this,!1),document.addEventListener("click",this,!1)),this._element.addEventListener("dragstart",this,!1),this.component.eventManager.claimPointer(this._observedPointer,this),this._dispatchPressStart(e)}},_interpretInteraction:{value:function(e){var t,n,i;if(null===this._observedPointer)return this._endInteraction(e),void 0;for(t=!this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this),n=e.target;n!==this._element&&n&&n.parentNode;)n=n.parentNode;if(i=n===this._element,t&&"click"===e.type)return e.preventDefault(),this._endInteraction(e),void 0;if("mouseup"===e.type){if(!t&&i)return this._dispatchPress(e),this._endInteraction(e),void 0;if(!t&&!i)return this._dispatchPressCancel(e),this._endInteraction(e),void 0;t&&!i&&this._endInteraction(e)}}},_endInteraction:{value:function(e){e&&"touchend"!==e.type&&"touchcancel"!==e.type?e&&"click"!==e.type&&"mouseup"!==e.type||(document.removeEventListener("click",this),document.removeEventListener("mouseup",this)):(document.removeEventListener("touchend",this),document.removeEventListener("touchcancel",this)),this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.component.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null,this._state=a.UNPRESSED}},_changedTouchisObserved:{value:function(){if(null===this._observedPointer)return!1;for(var e=0,t=event.changedTouches.length;t>e;e++)if(event.changedTouches[e].identifier===this._observedPointer)return e;return!1}},surrenderPointer:{value:function(e,t){var n=this.callDelegateMethod("surrenderPointer",e,t);return void 0!==n&&n===!1?!1:(this._dispatchPressCancel(),!0)}},captureTouchstart:{value:function(e){this._startInteraction(e)}},handleTouchend:{value:function(e){return null===this._observedPointer?(this._endInteraction(e),void 0):(this._changedTouchisObserved(e.changedTouches)!==!1&&(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?this._dispatchPress(e):e.preventDefault(),this._endInteraction(e)),void 0)}},handleTouchcancel:{value:function(e){(null===this._observedPointer||this._changedTouchisObserved(e.changedTouches)!==!1)&&(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this._dispatchPressCancel(e),this._endInteraction(e))}},captureMousedown:{value:function(e){this._startInteraction(e)}},handleClick:{value:function(e){this._interpretInteraction(e)}},handleMouseup:{value:function(e){this._interpretInteraction(e)}},handleDragstart:{value:function(e){this._dispatchPressCancel(e),this._endInteraction()}},_createPressEvent:{enumerable:!1,value:function(e,t){var n,i;return t||(t=document.createEvent("CustomEvent"),t.initCustomEvent(e,!0,!0,null)),n=new o,n.event=t,n.type=e,n.pointer=this._observedPointer,n.targetElement=t.target,t.changedTouches&&(i=this._changedTouchisObserved(t.changedTouches))!==!1&&(n.touch=t.changedTouches[i]),n}},_dispatchPressStart:{enumerable:!1,value:function(e){if(this._state=a.PRESSED,this.dispatchEvent(this._createPressEvent("pressStart",e)),this._shouldDispatchLongPress){var t=this;this._longPressTimeout=setTimeout(function(){t._dispatchLongPress()},this._longPressThreshold)}}},_dispatchPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this.dispatchEvent(this._createPressEvent("press",e)),this._state=a.UNPRESSED
}},_dispatchLongPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(this.dispatchEvent(this._createPressEvent("longPress",e)),this._longPressTimeout=null)}},_dispatchPressCancel:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this._state=a.CANCELLED,this.dispatchEvent(this._createPressEvent("pressCancel",e))}}}),o=function(){var e,t,i,a,o,s;for(e=r.specialize({type:{value:"press"},_event:{enumerable:!1,value:null},event:{get:function(){return this._event},set:function(e){this._event=e}},_touch:{enumerable:!1,value:null},touch:{get:function(){return this._touch},set:function(e){this._touch=e}}}),t=["altKey","ctrlKey","metaKey","shiftKey","cancelBubble","currentTarget","defaultPrevented","eventPhase","timeStamp","preventDefault","stopImmediatePropagation","stopPropagation"],i=["clientX","clientY","pageX","pageY","screenX","screenY","target"],a=function(e){return{get:function(){return this._event[e]}}},o=function(e){return{get:function(){return this._touch?this._touch[e]:this._event[e]}}},s=t.length-1;s>=0;s--)n.defineProperty(e,t[s],a(t[s]));for(s=i.length-1;s>=0;s--)n.defineProperty(e,i[s],o(i[s]));return e}()}}),montageDefine("918dae1","ui/main.reel/main",{dependencies:["montage","montage/ui/component","montage/core/template","gist","components","examples"],factory:function(e,t){var n=e("montage").Montage,i=e("montage/ui/component").Component,r=e("montage/core/template").Template,a=e("gist").gist,o=1;t.Main=i.specialize({templateObjects:{value:{}},_componentId:{value:1},_logger:{value:null},templateDidLoad:{value:function(){var e=this.examples[0];this._logger=this.templateObjects.logger,this.addEventListener("action",this,!1),window.addEventListener("hashchange",this,!1);var t=location.hash.slice(3);t?(this.loadGist(t),this.setupGistLink(t)):(this.loadExample(e),this.executeFiddle())}},components:{value:e("components").components},examples:{value:e("examples").examples},loadGist:{value:function(e){var t=this;a.load(e,null,function(n,i,a,s){var l,u,c;return n.version!==o?(t.redirectToVersion(n.version,e),void 0):(a&&(c=new r,l=c.createHtmlDocumentWithHtml(a),u=c.getInlineObjectsString(l),a=l.body.innerHTML,u=u.replace(/\n    /g,"\n"),a=a.replace(/\n    /g,"\n").replace(/^\s*\n|\n\s*$/g,"")),t.loadFiddle(i,u,a,s),t.executeFiddle(),void 0)})}},loadFiddle:{value:function(e,t,n,i){this.templateObjects.cssCodeMirror.value=e||"",this.templateObjects.serializationCodeMirror.value=t||"",this.templateObjects.htmlCodeMirror.value=n||"",this.templateObjects.javascriptCodeMirror.value=i||""}},executeFiddle:{value:function(){var e=this.templateObjects;e.montageFrame.load(e.cssCodeMirror.value,e.serializationCodeMirror.value,e.htmlCodeMirror.value,e.javascriptCodeMirror.value)}},loadExample:{value:function(e){location.hash="",this.loadFiddle(e.css,this._stringifySerialization(e.serialization),e.html,e.javascript),this.executeFiddle()}},addComponentToFiddle:{value:function(e){var t=this._generateComponentId(e.name);e.serialization.properties.element={"#":t},this._addSerialization(t,e.serialization),this._addHtml(e.html.replace('data-montage-id=""','data-montage-id="'+t+'"')),this.executeFiddle()}},redirectToVersion:{value:function(e,t){var n;e||(e=0),n=window.location.href.slice(0,-window.location.hash.length)+"v"+e+"/#!/"+t,window.location.href=n}},clear:{value:function(){location.hash="",this.loadFiddle("","","",""),this.executeFiddle()}},_tmpDiv:{value:document.createElement("div")},_addHtml:{value:function(e){var t,i,r=this._getSerializationObject(),a=this.templateObjects.htmlCodeMirror,o=a.value,s=this._tmpDiv,l=!0;if(t=r&&n.getPath.call(r,"owner.properties.element['#']"))if(a.hasModeErrors())this._logger.log("Add component warning: The HTML code seems to be invalid, appending element at the end.");else if(s.innerHTML=o,i=s.querySelector("*[data-montage-id='"+t+"']"),i&&i.parentNode==s&&!i.nextSibling){/([\t ]*)[^\n]*\n\s*<\/[^>]+>\s*$/.exec(o);var u=RegExp.$1||"";o=o.replace(/<\/[^>]+>\s*$/,u+e+"\n$&"),l=!1}else this._logger.log("Add component warning: The owner's element is not the single root element, appending element at the end.");l&&(o+=(o?"\n":"")+e),a.value=o}},_addSerialization:{value:function(e,t){var n,i=this._getSerializationObject(),r=this.templateObjects.serializationCodeMirror.value;i?(i[e]=t,n=this._stringifySerialization(i)):(i={},i[e]=t,n=this.templateObjects.serializationCodeMirror.value+(r?"\n":"")+this._stringifySerialization(i),r&&this._logger.log("Add component warning: The serialization seems to be invalid, appending component at the end.")),this.templateObjects.serializationCodeMirror.value=n}},_serializationObject:{value:null},_lastSerialization:{value:null},_getSerializationObject:{value:function(){var e=this.templateObjects.serializationCodeMirror.value;if(e===this._lastSerialization)return this._serializationObject;this._lastSerialization=e;try{return this._serializationObject=JSON.parse(e)}catch(t){return this._serializationObject=null}}},_generateComponentId:{value:function(e){var t,n=this._getSerializationObject();if(n){do t=e+this._componentId++;while(t in n)}else t=e+this._componentId++;return t}},_htmlPageTemplate:{value:'<!DOCTYPE html>\n<html>\n<head>\n    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n    <title>MFiddle</title>\n    <script type="text/montage-serialization"><!-- serialization --></script></head>\n<body>\n    <!-- html -->\n</body>\n</html>'},_generateHtmlPage:{value:function(){var e=this.templateObjects,t=e.serializationCodeMirror.value,n=e.htmlCodeMirror.value;return t=t.replace(/\n/gm,"\n    "),n=n.replace(/\n/gm,"\n    "),this._htmlPageTemplate.replace("<!-- serialization -->",t).replace("<!-- html -->",n)}},handleComponentButtonAction:{value:function(e){this.addComponentToFiddle(e.target.component)}},handleSaveAction:{value:function(){a.save({anon:!0,cssCode:this.templateObjects.cssCodeMirror.value,htmlMarkup:this._generateHtmlPage(),jsCode:this.templateObjects.javascriptCodeMirror.value,settings:{version:1},callback:function(e,t){location.hash=t?"!/"+e+"/"+t:"!/"+e}})}},handleNewAction:{value:function(){this.clear()}},handleRunAction:{value:function(){this.executeFiddle()}},handleExampleButtonAction:{value:function(e){this.loadExample(e.target.example)}},handleHashchange:{value:function(){var e=location.hash.slice(3);e&&a.id!=e&&this.loadGist(e),this.setupGistLink(e)}},setupGistLink:{value:function(e){var t=this.templateObjects.gistLink,n=this.templateObjects.gistLinkCondition;n.condition=!!e,t.href="https://gist.github.com/"+e}},_stringifySerialization:{value:function(e){return JSON.stringify(e,null,4).replace(/\{\s*(\"[#@]\")\s*:\s*(\"[^\"]+\")\s*\}/g,"{$1: $2}").replace(/\{\s*(\"(?:<-|<->)\")\s*:\s*(\"[^\"]+\"\s*(?:,\s*\"converter\"\s*:\s*\{\s*\"@\"\s*:\s*\"[^\"]+\"\s*\}\s*|,\s*\"deferred\"\s*:\s*(true|false)\s*)*)\}/g,function(e,t,n){return"{"+t+": "+n.replace(/,\s*/,", ").replace(/\n\s*/,"")+"}"})}}})}}),montageDefine("0f6b029","ui/scroll-bars.reel/scroll-bars",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.ScrollBars=n.specialize({_verticalScroll:{value:0},_horizontalScroll:{value:0},_verticalLength:{value:0},_horizontalLength:{value:0},verticalScroll:{get:function(){return this._verticalScroll},set:function(e){this._verticalScroll=e,this.needsDraw=!0}},horizontalScroll:{get:function(){return this._horizontalScroll},set:function(e){this._horizontalScroll=e,this.needsDraw=!0}},verticalLength:{get:function(){return this._verticalLength},set:function(e){this._verticalLength=e,this.needsDraw=!0}},horizontalLength:{get:function(){return this._horizontalLength},set:function(e){this._horizontalLength=e,this.needsDraw=!0}},_opacity:{value:0},opacity:{get:function(){return this._opacity},set:function(e){this._opacity=e,this.needsDraw=!0}},_isDisplayUpdated:{value:!1},_displayVertical:{value:!1},displayVertical:{get:function(){return this._displayVertical},set:function(e){this._displayVertical!==e&&(this._displayVertical=e,this._isDisplayUpdated=!0,this.needsDraw=!0)}},_displayHorizontal:{value:!1},displayHorizontal:{get:function(){return this._displayHorizontal},set:function(e){this._displayHorizontal!==e&&(this._displayHorizontal=e,this._isDisplayUpdated=!0,this.needsDraw=!0)}},_top:{value:!1},_bottomClip:{value:!1},_bottom:{value:!1},_left:{value:!1},_rightClip:{value:!1},_right:{value:!1},_hasResizedHorizontal:{value:!1},_hasResizedVertical:{value:!1},willDraw:{value:function(){this._offsetWidth!==this._element.offsetWidth&&(this._offsetWidth=this._element.offsetWidth,this._hasResizedHorizontal=!0),this._offsetHeight!==this._element.offsetHeight&&(this._offsetHeight=this._element.offsetHeight,this._hasResizedVertical=!0)}},draw:{value:function(){var e,t,n,i;if(this._isDisplayUpdated){var r=this._displayVertical?"block":"none",a=this._displayHorizontal?"block":"none";this._top.style.display=this._bottomClip.style.display=r,this._left.style.display=this._rightClip.style.display=a,this._isDisplayUpdated=!1}if(this._hasResizedHorizontal&&this._displayHorizontal&&(this._rightClip.style.width=this._right.style.width=this._offsetWidth-4+"px",this._rightClip.style.clip="rect(-1px,"+(this._offsetWidth-3)+"px,6px,3px)",this._hasResizedHorizontal=!1),this._hasResizedVertical&&this._displayVertical&&(this._bottomClip.style.height=this._bottom.style.height=this._offsetHeight-4+"px",this._bottomClip.style.clip="rect(3px,6px,"+(this._offsetHeight-3)+"px,-1px)",this._hasResizedVertical=!1),this._opacity){if(this._displayHorizontal){n=this._offsetWidth-9-(this._displayVertical?6:0),e=Math.floor(n*this._horizontalLength),i=n-e,t=1-this._horizontalLength?Math.floor(i*this._horizontalScroll/(1-this._horizontalLength)):0,0>t&&(e+=t,0>e&&(e=0),t=0),t>i&&(e+=Math.floor(i-t),0>e&&(e=0),t=n-e);var o=e-this._offsetWidth+9+"px,0px",s=t+2+"px,0px";this._right.style.webkitTransform="translate3d("+o+",0)",this._right.style.MozTransform="translate("+o+")",this._right.style.transform="translate("+o+")",this._left.style.webkitTransform=this._rightClip.style.webkitTransform="translate3d("+s+",0)",this._left.style.MozTransform=this._rightClip.style.MozTransform="translate("+s+")",this._left.style.transform=this._rightClip.style.transform="translate("+s+")",this._left.style.webkitTransition=this._right.style.webkitTransition="none",this._left.style.MozTransition=this._right.style.MozTransition="none",this._left.style.transition=this._right.style.transition="none",this._left.style.opacity=this._right.style.opacity=this._opacity}if(this._displayVertical){n=this._offsetHeight-9-(this._displayHorizontal?6:0),e=Math.floor(n*this._verticalLength),i=n-e,t=1-this._verticalLength?Math.floor(i*this._verticalScroll/(1-this._verticalLength)):0,0>t&&(e+=t,0>e&&(e=0),t=0),t>i&&(e+=Math.floor(i-t),0>e&&(e=0),t=n-e);var l="0px,"+(e-this._offsetHeight+9)+"px",u="0px,"+(t+2)+"px";this._bottom.style.webkitTransform="translate3d("+l+",0)",this._bottom.style.MozTransform="translate("+l+")",this._bottom.style.transform="translate("+l+")",this._top.style.webkitTransform=this._bottomClip.style.webkitTransform="translate3d("+u+",0)",this._top.style.MozTransform=this._bottomClip.style.MozTransform="translate("+u+")",this._top.style.transform=this._bottomClip.style.transform="translate("+u+")",this._top.style.webkitTransition=this._bottom.style.webkitTransition="none",this._top.style.MozTransition=this._bottom.style.MozTransition="none",this._top.style.transition=this._bottom.style.transition="none",this._top.style.opacity=this._bottom.style.opacity=this._opacity}}else this._displayHorizontal&&(this._left.style.webkitTransition=this._right.style.webkitTransition="300ms opacity",this._left.style.opacity=this._right.style.opacity=0),this._displayVertical&&(this._top.style.webkitTransition=this._bottom.style.webkitTransition="300ms opacity",this._top.style.opacity=this._bottom.style.opacity=0)}}})}}),montageDefine("727bebb","core/range-controller",{dependencies:["montage","core/promise","collections/generic-collection"],factory:function(e,t){var n=e("montage").Montage,i=e("core/promise").Promise,r=e("collections/generic-collection");t.RangeController=n.specialize({constructor:{value:function(){this.content=null,this._selection=[],this.selection=[],this.defineBinding("_selection.rangeContent()",{"<->":"selection.rangeContent()"}),this.sortPath=null,this.filterPath=null,this.visibleIndexes=null,this.reversed=!1,this.start=null,this.length=null,this.selectAddedContent=!1,this.deselectInvisibleContent=!1,this.clearSelectionOnOrderChange=!1,this.avoidsEmptySelection=!1,this.multiSelect=!1,this.organizedContent=[],this.organizedContent.addRangeChangeListener(this,"organizedContent"),this.defineBinding("_orderedContent",{"<-":"content.($filterPath.defined() ? filter{path($filterPath)} : ()).($sortPath.defined() ? sorted{path($sortPath)} : ()).($reversed ?? 0 ? reversed() : ())"}),this.defineBinding("organizedContent.rangeContent()",{"<-":"_orderedContent.($visibleIndexes.defined() ?$visibleIndexes.filter{<$_orderedContent.length}.map{$_orderedContent[()]} : ()).($start.defined() && $length.defined() ?view($start, $length) : ())"}),this._selection.addRangeChangeListener(this,"selection"),this.addRangeAtPathChangeListener("content",this,"handleContentRangeChange"),this.addPathChangeListener("sortPath",this,"handleOrderChange"),this.addPathChangeListener("reversed",this,"handleOrderChange"),this.addOwnPropertyChangeListener("multiSelect",this),this.iterations=[]}},initWithContent:{value:function(e){return this.content=e,this}},sortPath:{value:null},reversed:{value:null},filterPath:{value:null},visibleIndexes:{value:null},start:{value:null},length:{value:null},selectAddedContent:{value:!1},deselectInvisibleContent:{value:!1},clearSelectionOnOrderChange:{value:!1},avoidsEmptySelection:{value:!1},multiSelect:{value:!1},_orderedContent:{value:null},organizedContent:{value:null},iterations:{value:null},selection:{value:null},_selection:{value:null},select:{value:function(e){!this.multiSelect&&this._selection.length>=1&&this._selection.clear(),this._selection.add(e)}},deselect:{value:function(e){(!this.avoidsEmptySelection||this._selection.length>1)&&this._selection["delete"](e)}},clearSelection:{value:function(){(!this.avoidsEmptySelection||this._selection.length>1)&&this._selection.clear()}},add:{value:function(e){var t;return this.content||(this.content=[]),t=this.content.add(e),t&&this.handleAdd(e),t}},push:{value:function(){for(var e=this.content.push.apply(this.content,arguments),t=0;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},pop:{value:function(){return this.content.pop()}},shift:{value:function(){return this.content.shift()}},unshift:{value:function(){for(var e=this.content.unshift.apply(this.content,arguments),t=0;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},splice:{value:function(){for(var e=this.content.splice.apply(this.content,arguments),t=2;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},swap:{value:function(e,t,n){for(var i=this.content.splice.apply(this.content,n),e=2;n.length>e;e++)this.handleAdd(n[e]);return i}},"delete":{value:function(e){return this.content["delete"](e)}},has:{value:function(e){return this.content?this.content.has(e):!1}},addEach:{value:r.prototype.addEach},deleteEach:{value:r.prototype.deleteEach},clear:{value:function(){this.content.clear()}},addContent:{value:function(){var e=new this.contentConstructor;return this.add(e),e}},_contentConstructor:{value:null},contentConstructor:{get:function(){return this._contentConstructor?this._contentConstructor:this.content&&this.content.contentConstructor?this.content.contentConstructor:Object},set:function(e){this._contentConstructor=e}},handleContentRangeChange:{value:function(e,t){t.deleteEach(e),this._selection.deleteEach(t)}},handleSelectionRangeChange:{value:function(e,t){var n=this;i.nextTick(function(){var i=n._selection.length;n.avoidsEmptySelection&&0===i?n.select(t[t.length-1]):!n.multiSelect&&i>1&&n._selection.splice(0,n._selection.length,e[e.length-1])})}},handleOrganizedContentRangeChange:{value:function(e,t){if(this.deselectInvisibleContent){var n=t.clone(1);n.deleteEach(e),this._selection.deleteEach(t)}}},handleOrderChange:{value:function(){this.clearSelectionOnOrderChange&&this._selection.clear()}},handleAdd:{value:function(e){this.selectAddedContent&&(!this.multiSelect&&this._selection.length>=1&&this._selection.clear(),this._selection.add(e))}},handleMultiSelectChange:{value:function(){var e=this._selection.length;!this.multiSelect&&e>1&&this._selection.splice(0,e-1)}}},{blueprintModuleId:e("montage")._blueprintModuleIdDescriptor,blueprint:e("montage")._blueprintDescriptor})}}),montageDefine("918dae1","ui/main.reel/main.html",{text:'<!doctype html>\n\n<html>\n<head>\n    <meta http-equiv=Content-Type content="text/html;charset=utf-8">\n    <title>MFiddle</title>\n    <link rel=stylesheet href=main.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"main"}}},"cssView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"css"},"title":"CSS"}},"serializationView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"serialization"},"title":"Serialization"}},"htmlView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"html"},"title":"HTML"}},"javascriptView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"javascript"},"title":"JavaScript"}},"previewView":{"prototype":"ui/content-view.reel","properties":{"element":{"#":"preview"},"title":"Preview"}},"cssCodeMirror":{"prototype":"ui/code-mirror.reel","properties":{"element":{"#":"cssCodeMirror"},"mode":"css","matchBrackets":true,"lineNumbers":true}},"serializationCodeMirror":{"prototype":"ui/code-mirror.reel","properties":{"element":{"#":"serializationCodeMirror"},"mode":"json","matchBrackets":true,"lineNumbers":true}},"htmlCodeMirror":{"prototype":"ui/code-mirror.reel","properties":{"element":{"#":"htmlCodeMirror"},"mode":"htmlmixed","lineNumbers":true}},"javascriptCodeMirror":{"prototype":"ui/code-mirror.reel","properties":{"element":{"#":"javascriptCodeMirror"},"mode":"javascript","lineNumbers":true}},"components":{"prototype":"montage/ui/repetition.reel","properties":{"element":{"#":"components"}},"bindings":{"content":{"<-":"@owner.components"}}},"componentButton":{"prototype":"ui/component-button.reel","properties":{"element":{"#":"componentButton"}},"bindings":{"component":{"<-":"@components.objectAtCurrentIteration"}}},"gistLinkCondition":{"prototype":"montage/ui/condition.reel","properties":{"element":{"#":"gistLinkCondition"},"condition":false}},"gistLink":{"prototype":"matte/ui/anchor.reel","properties":{"element":{"#":"gist"}}},"save":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"save"}}},"new":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"new"}}},"run":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"run"}}},"examples":{"prototype":"montage/ui/repetition.reel","properties":{"element":{"#":"examples"}},"bindings":{"content":{"<-":"@owner.examples"}}},"exampleButton":{"prototype":"ui/example-button.reel","properties":{"element":{"#":"exampleButton"}},"bindings":{"example":{"<-":"@examples.objectAtCurrentIteration"}}},"montageFrame":{"prototype":"ui/montage-frame.reel","properties":{"element":{"#":"montageFrame"}}},"logger":{"prototype":"ui/logger.reel","properties":{"element":{"#":"logger"}},"bindings":{"input":{"<-":"@montageFrame.logMessages"}}}}</script>\n</head>\n<body>\n<div data-montage-id=main>\n    <div id=header>\n        <h1 id=logo>MFiddle</h1>\n        <ul id=components data-montage-id=components>\n            <li>\n                <div class=component-button-holder><div data-montage-id=componentButton></div></div>\n            </li>\n        </ul>\n        <ul id=links>\n            <li data-montage-id=gistLinkCondition class=montage-invisible><a data-montage-id=gist href="" target=_blank class=link>Gist</a></li>\n        </ul>\n        <ul id=menu>\n            <li><div class=menu-button data-montage-id=save>Save</div></li>\n            <li><div class=menu-button data-montage-id=new>New</div></li>\n            <li><div id=run class=menu-button data-montage-id=run>Run</div></li>\n            <li>\n                <div id=examples>\n                    <h2>Examples</h2>\n                    <ul data-montage-id=examples>\n                        <li class=exampleButtons>\n                            <span data-montage-id=exampleButton></span>\n                        </li>\n                    </ul>\n                </div>\n            </li>\n        </ul>\n    </div>\n    <div id=css data-montage-id=css>\n        <div data-montage-id=cssCodeMirror></div>\n    </div>\n    <div id=serialization data-montage-id=serialization>\n        <div data-montage-id=serializationCodeMirror></div>\n    </div>\n    <div id=html data-montage-id=html>\n        <div data-montage-id=htmlCodeMirror></div>\n    </div>\n    <div id=javascript data-montage-id=javascript>\n        <div data-montage-id=javascriptCodeMirror></div>\n    </div>\n    <div id=preview data-montage-id=preview>\n        <div id=iframe-wrapper>\n            <div data-montage-id=montageFrame></div>\n        </div>\n        <div id=logger data-montage-id=logger></div>\n    </div>\n</div>\n</body>\n</html>'}),montageDefine("918dae1","examples",{dependencies:["montage/ui/component"],factory:function(e,t){t.examples=[{label:"Simple component",css:"",serialization:{owner:{properties:{element:{"#":"component"}}},button:{prototype:"digit/ui/button.reel",properties:{element:{"#":"button"},label:"Click Me!"}}},html:'<div data-montage-id="component">\n	<button data-montage-id="button"></button>\n</div>',javascript:'var Component = require("montage/ui/component").Component;\n\nexports.Owner = Component.specialize({\n    templateDidLoad: {\n        value: function() {\n            console.log("templateDidLoad");\n        }\n    }\n});\n'},{label:"Simple button",css:"",serialization:{button:{prototype:"digit/ui/button.reel",properties:{element:{"#":"button"},label:"Click Me!"}}},html:'<button data-montage-id="button"></button>',javascript:""},{label:"Simple binding",css:".slider {\n    width: 50%;\n}",serialization:{slider:{prototype:"digit/ui/slider.reel",properties:{element:{"#":"slider"},value:50}},text:{prototype:"montage/ui/text.reel",properties:{element:{"#":"text"}},bindings:{value:{"<-":"@slider.value"}}}},html:'<input type="slider" data-montage-id="slider" class="slider">\n<h2 data-montage-id="text"></h2>',javascript:""},{label:"Simple listener",css:"",serialization:{owner:{properties:{element:{"#":"component"}}},button:{prototype:"digit/ui/button.reel",properties:{element:{"#":"button"},label:"Click Me!"},listeners:[{type:"action",listener:{"@":"owner"}}]}},html:'<div data-montage-id="component">\n	<button data-montage-id="button"></button>\n</div>',javascript:'var Component = require("montage/ui/component").Component;\n\nexports.Owner = Component.specialize({\n    handleButtonAction: {\n        value: function() {\n            console.log("action!");\n        }\n    }\n});\n'},{label:"Simple condition",css:"",serialization:{owner:{properties:{element:{"#":"component"}}},toggle:{prototype:"digit/ui/checkbox.reel",properties:{element:{"#":"toggle"},checked:!0}},hideBlockCondition:{prototype:"montage/ui/condition.reel",properties:{element:{"#":"block"}},bindings:{condition:{"<-":"@toggle.checked"}}}},html:'<div data-montage-id="component">\n	<label><input type="checkbox" data-montage-id="toggle">Show</label>\n    <div data-montage-id="block">\n        <h2>Hello There!</h2>\n    </div>\n</div>',javascript:'var Component = require("montage/ui/component").Component;\n\nexports.Owner = Component.specialize({\n});\n'},{label:"Two-way bindings",css:".slider2 {\n    width: 50%;\n}",serialization:{number:{prototype:"digit/ui/number-field.reel",properties:{element:{"#":"number"},value:50}},slider1:{prototype:"digit/ui/slider.reel",properties:{element:{"#":"slider1"}},bindings:{value:{"<->":"@number.value"}}},slider2:{prototype:"digit/ui/slider.reel",properties:{element:{"#":"slider2"}},bindings:{value:{"<->":"@number.value"}}}},html:'<p>\n    <input type="number" data-montage-id="number">\n    <input type="slider" data-montage-id="slider1" class="slider1">\n</p>\n<p>\n    <input type="slider" data-montage-id="slider2" class="slider2">\n</p>',javascript:""},{label:"Accessing repetition objects",css:"",serialization:{repetition:{prototype:"montage/ui/repetition.reel",properties:{content:["Mike","François","Afonso","Heather"],element:{"#":"repetition"}}},text:{prototype:"montage/ui/text.reel",properties:{element:{"#":"text"}},bindings:{value:{"<-":"@repetition.objectAtCurrentIteration"}}}},html:'<ul data-montage-id="repetition">\n  <li>\n    Hello there <span data-montage-id="text"></span>!\n  </li>\n</ul>',javascript:""},{label:"Listening on repeated buttons",css:"",serialization:{owner:{properties:{element:{"#":"owner"}}},repetition:{prototype:"montage/ui/repetition.reel",properties:{content:["One","Two","Three"],element:{"#":"repetition"}}},button:{prototype:"digit/ui/button.reel",properties:{element:{"#":"button"}},bindings:{label:{"<-":"@repetition.objectAtCurrentIteration"}},listeners:[{type:"action",listener:{"@":"owner"}}]}},html:'<div data-montage-id="owner">\n    <ul data-montage-id="repetition">\n        <button data-montage-id="button"></button>\n    </ul>\n</div>',javascript:'var Component = require("montage/ui/component").Component;\n\nexports.Owner = Component.specialize({\n    handleAction: {\n        value: function(event) {\n            console.log("action: " + event.target.element.textContent);\n        }\n    }\n});\n'}]}}),montageDefine("abd8e11","ui/button.reel/button",{dependencies:["ui/native-control","montage/composer/press-composer","montage/collections/dict"],factory:function(e,t){var n=e("ui/native-control").NativeControl,i=e("montage/composer/press-composer").PressComposer,r=e("montage/collections/dict"),a=t.Button=n.specialize({_preventFocus:{enumerable:!1,value:!1},preventFocus:{get:function(){return this._preventFocus},set:function(e){this._preventFocus=e===!0?!0:!1}},enabled:{dependencies:["disabled"],get:function(){return!this._disabled},set:function(e){this.disabled=!e}},converter:{value:null},_labelNode:{value:void 0,enumerable:!1},_label:{value:void 0,enumerable:!1},label:{get:function(){return this._label},set:function(e){if(e&&e.length>0&&this.converter)try{e=this.converter.convert(e),this.error&&(this.error=null)}catch(t){this.error=t}this._label=e,this._isInputElement&&(this._value=e),this.needsDraw=!0}},setLabelInitialValue:{value:function(e){void 0===this._label&&(this._label=e)}},holdThreshold:{get:function(){return this._pressComposer.longPressThreshold},set:function(e){this._pressComposer.longPressThreshold=e}},_pressComposer:{enumberable:!1,value:null},_active:{enumerable:!1,value:!1},active:{get:function(){return this._active},set:function(e){this._active=e,this.needsDraw=!0}},blur:{value:function(){this._element.blur()}},focus:{value:function(){this._element.focus()}},constructor:{value:function(){this.super(),this._pressComposer=new i,this._pressComposer.longPressThreshold=this.holdThreshold,this.addComposer(this._pressComposer)}},prepareForActivationEvents:{value:function(){this._pressComposer.addEventListener("pressStart",this,!1),this._pressComposer.addEventListener("press",this,!1),this._pressComposer.addEventListener("pressCancel",this,!1)}},addEventListener:{value:function(e,t,n){this.super(e,t,n),"hold"===e&&this._pressComposer.addEventListener("longPress",this,!1)}},handlePressStart:{value:function(e){this.active=!0,e.touch&&document.addEventListener("touchmove",this,!1),this._preventFocus||this._element.focus()}},handlePress:{value:function(){this.active=!1,this._dispatchActionEvent(),document.removeEventListener("touchmove",this,!1)}},handleKeyup:{value:function(e){32===e.keyCode&&(this.active=!1,this._dispatchActionEvent())}},handleLongPress:{value:function(){this._pressComposer.cancelPress();var e=document.createEvent("CustomEvent");e.initCustomEvent("hold",!0,!0,null),this.dispatchEvent(e)}},handlePressCancel:{value:function(){this.active=!1,document.removeEventListener("touchmove",this,!1)}},handleTouchmove:{value:function(e){e.preventDefault()}},_isInputElement:{value:!1,enumerable:!1},enterDocument:{value:function(e){n.enterDocument&&n.enterDocument.apply(this,arguments),e&&(this._isInputElement="INPUT"===this.originalElement.tagName,this._isInputElement?(Object.defineProperty(this,"value",{get:function(){return this._label},set:function(e){this.label=e}}),void 0===this._label&&(this._label=this.originalElement.value)):(this.originalElement.firstChild||this.originalElement.appendChild(document.createTextNode("")),this._labelNode=this.originalElement.firstChild,this.setLabelInitialValue(this._labelNode.data),void 0===this._label&&(this._label=this._labelNode.data)),this.element.setAttribute("role","button"),this.element.addEventListener("keyup",this,!1))}},_drawLabel:{enumerable:!1,value:function(e){this._isInputElement?this._element.setAttribute("value",e):this._labelNode.data=e}},draw:{value:function(){this.super(),this._disabled?this._element.classList.add("disabled"):this._element.classList.remove("disabled"),this._active?this._element.classList.add("active"):this._element.classList.remove("active"),this._drawLabel(this.label)}},_detail:{value:null},detail:{get:function(){return null===this._detail&&(this._detail=new r),this._detail}},createActionEvent:{value:function(){var e,t=document.createEvent("CustomEvent");return e=this._detail,t.initCustomEvent("action",!0,!0,e),t}}});a.addAttributes({autofocus:{value:!1,dataType:"boolean"},disabled:{value:!1,dataType:"boolean"},form:null,formaction:null,formenctype:null,formmethod:null,formnovalidate:{dataType:"boolean"},formtarget:null,type:{value:"button"},name:null,value:null})}}),montageDefine("0f6b029","ui/scroller.reel/scroller",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Scroller=n.specialize({_scrollX:{value:0},scrollX:{get:function(){return this._scrollX},set:function(e){this._scrollX!==e&&(this._scrollX=e,this.needsDraw=!0)}},_scrollY:{value:0},scrollY:{get:function(){return this._scrollY},set:function(e){this._scrollY!==e&&(this._scrollY=e,this.needsDraw=!0)}},_maxTranslateX:{value:0},_maxTranslateY:{value:0},_axis:{value:"auto"},axis:{get:function(){return this._axis},set:function(e){this._axis=e,this.needsDraw=!0}},_displayScrollbars:{value:"auto"},displayScrollbars:{get:function(){return this._displayScrollbars},set:function(e){switch(e){case"vertical":case"horizontal":case"both":case"auto":this._displayScrollbars=e;break;default:this._displayScrollbars="none"}this.needsDraw=!0}},_hasMomentum:{value:!0},hasMomentum:{get:function(){return this._hasMomentum},set:function(e){this._hasMomentum=e}},_content:{value:null},_scrollBars:{value:null},handleTranslateStart:{value:function(){this._scrollBars.opacity=.5}},handleTranslateEnd:{value:function(){this._scrollBars.opacity=0}},canDraw:{value:function(){return this.needsDraw=!0,n.canDraw.apply(this,arguments)}},willDraw:{value:function(){this._left=this._element.offsetLeft,this._top=this._element.offsetTop,this._width=this._element.offsetWidth,this._height=this._element.offsetHeight,this._maxTranslateX=this._content.scrollWidth-this._width,0>this._maxTranslateX&&(this._maxTranslateX=0),this._maxTranslateY=this._content.offsetHeight-this._height,0>this._maxTranslateY&&(this._maxTranslateY=0);var e=this.callDelegateMethod("didSetMaxScroll",{x:this._maxTranslateX,y:this._maxTranslateY});switch(e&&(this._maxTranslateX=e.x,this._maxTranslateY=e.y),this.scrollX=Math.min(this._scrollX,this._maxTranslateX),this.scrollY=Math.min(this._scrollY,this._maxTranslateY),this._displayScrollbars){case"horizontal":this._scrollBars.displayHorizontal=!0,this._scrollBars.displayVertical=!1;
break;case"vertical":this._scrollBars.displayHorizontal=!1,this._scrollBars.displayVertical=!0;break;case"both":this._scrollBars.displayHorizontal=!0,this._scrollBars.displayVertical=!0;break;case"auto":this._scrollBars.displayHorizontal=!!this._maxTranslateX,this._scrollBars.displayVertical=!!this._maxTranslateY;break;case"none":this._scrollBars.displayHorizontal=!1,this._scrollBars.displayVertical=!1}this._scrollBars.displayHorizontal&&(this._content.scrollWidth?(this._scrollBars.horizontalLength=this._width/this._content.scrollWidth,this._scrollBars.horizontalScroll=this._scrollX/this._content.scrollWidth):(this._scrollBars.horizontalLength=1,this._scrollBars.horizontalScroll=0)),this._scrollBars.displayVertical&&(this._content.offsetHeight?(this._scrollBars.verticalLength=this._height/this._content.offsetHeight,this._scrollBars.verticalScroll=this._scrollY/this._content.offsetHeight):(this._scrollBars.verticalLength=1,this._scrollBars.verticalScroll=0))}},draw:{value:function(){var e=-this._scrollX+"px, "+-this._scrollY+"px";this._content.style.webkitTransform="translate3d("+e+", 0px)",this._content.style.MozTransform="translate("+e+")",this._content.style.transform="translate("+e+")"}}})}}),montageDefine("918dae1","gist",{dependencies:[],factory:function(e,t){var n="https://api.github.com/",i="http://mfiddle.jit.su/",r=t.gist={clientId:"clientId",files:null,oauth:[function(e){r.oauth.callback=e,open("https://github.com/login/oauth/authorize?client_id="+r.clientId+"&scope=gist","popup","width=1015,height=500")},function(e){e?(window.ACCESS_TOKEN=localStorage.access_token=e,r.getUser(r.oauth.callback)):alert("Authentication error"),r.oauth.callback=null}],request:function(e){e.method=e.method||"GET",e.id=e.id||"",e.rev=e.rev||"",e.accepted=e.accepted||[];var t=e.anon||"GET"===e.method;if(!t&&!window.ACCESS_TOKEN)return r.oauth[0](function(){r.request(e)}),void 0;var a=e.path||"gists"+(e.id?"/"+e.id:"")+(e.rev?"/"+e.rev:"")+(e.gpath||""),o="GET"===e.method?i:n;this._xhr({method:e.method,url:o+a+(!e.anon&&window.ACCESS_TOKEN?"?access_token="+ACCESS_TOKEN:""),headers:e.headers,callback:function(t){var n=t.responseText?JSON.parse(t.responseText):null;n&&n.message&&-1===e.accepted.indexOf(t.status)?alert("Sorry, I got a "+t.status+" ("+n.message+")"):e.callback&&e.callback(n,t)},data:e.data?JSON.stringify(e.data):null})},_xhr:function(e){var t=new XMLHttpRequest,n=e.method||"GET",i=e.data||"";if(t.open(n,e.url+("GET"===n&&i?"?"+i:""),!0),"GET"!==n&&t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.headers)for(var r in e.headers)t.setRequestHeader(r,e.headers[r]);return t.onreadystatechange=function(){4===t.readyState&&t.responseText&&e.callback(t)},t.send("GET"===n?null:i),t},getUser:function(e){r.request({path:"user",callback:function(t){window.user=t,e&&e(t)}})},save:function(e){e=e||{};var t=e.anon||!window.user,n=e.callback;if(!(!r.id||r.user&&window.user&&r.user.id==user.id||t))return r.fork(r.id,r.save,e.anon),void 0;var i=r.id||"",a=e.cssCode,o=e.htmlMarkup,s=e.jsCode,l=e.settings,u="title",c={};a&&(c["component.css"]={content:a}),o&&(c["component.html"]={content:o}),s&&(c["component.js"]={content:s}),c["settings.json"]={content:JSON.stringify(l)},r.request({anon:e.anon,id:t||e.forceNew?null:i,method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},callback:function(e){e.id&&r.update(e),n&&n(e.id)},data:{description:u,"public":!0,files:c}})},fork:function(e,t){r.request({method:"POST",gpath:"/fork",id:e||r.id||null,headers:{"Content-Type":"text/plain; charset=UTF-8"},callback:function(e){e.id&&(r.update(e),t&&t())},data:{}})},load:function(e,t,n){r.request({id:e||r.id,rev:t||r.rev,callback:function(e){r.update(e);var t,i,a,o,s=this.files=e.files,l=s["component.css"],u=s["component.html"],c=s["component.js"],h=s["settings.json"];if(!l||!u||!c)for(var d in s){var p=d.slice(d.lastIndexOf("."));if(l||".css"!=p||(l=s[d]),u||".html"!=p||(u=s[d]),c||".js"!=p||(c=s[d]),l&&u&&c)break}if(l&&(t=l.content),u&&(i=u.content),c&&(a=c.content),h)try{o=JSON.parse(h.content)}catch(f){console.warn("Unknown settings: ",h),o={}}else o={};n&&n(o,t,i,a)}})},update:function(e){var t=e.id,n=e.history&&e.history[0]&&e.history[0].version||"";r.id!=t?(r.id=t,r.rev=void 0):r.rev&&r.rev!==n&&(r.rev=n),e.user&&(r.user=e.user),r.saved=!0},saved:!1};window.ACCESS_TOKEN=localStorage.access_token}}),montageDefine("918dae1","ui/montage-frame.reel/montage-frame",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.MontageFrame=n.specialize({_css:{value:null},_serialization:{value:null},_html:{value:null},_javascript:{value:null},_hasNewData:{value:!1},_iframeReady:{value:!1},_iframeWindow:{value:null},_iframeDocument:{value:null},_cssElement:{value:null},_serializationElement:{value:null},_javascriptElement:{value:null},logMessages:{distinct:!0,value:[]},enterDocument:{value:function(e){var t=this;e&&window.addEventListener("message",function(e){e._event.source===t._element.contentWindow&&"ready"===e.data&&(t._iframeReady=!0,t.needsDraw=!0,t._iframeWindow=t._element.contentWindow,t._iframeDocument=t._element.contentDocument,t._cssElement=t._iframeDocument.head.querySelector("style"),t._javascriptElement=t._iframeDocument.head.querySelector("script[type='text/montage-javascript']"),t._iframeWindow.console.debug=t.debug.bind(t),t._iframeWindow.console.log=t.log.bind(t))},!1)}},debug:{value:function(e){0==e.indexOf("Syntax error")?this._iframeDocument.body.innerHTML="<pre>"+e+"</pre>":console.debug.apply(console,arguments)}},log:{value:function(){this.logMessages.push(Array.prototype.join.call(arguments," ")),console.log.apply(console,arguments)}},load:{value:function(e,t,n,i){this._css=e,this._serialization=t,this._html=n,this._javascript=i,this._hasNewData=!0,this.needsDraw=!0}},draw:{value:function(){if(this._iframeReady&&this._hasNewData){this._hasNewData=!1;var e=this._iframeDocument.head.querySelector("script[type='text/montage-serialization']");e&&e.parentNode.removeChild(e),this._serializationElement=this._iframeDocument.createElement("script"),this._serializationElement.setAttribute("type","text/montage-serialization"),this._iframeDocument.head.appendChild(this._serializationElement),this._iframeWindow.Frame.reset(),this._cssElement.textContent=this._css,this._serializationElement.textContent=this._serialization||"{}",this._javascriptElement.textContent=this._javascript,this._iframeDocument.body.innerHTML=this._html,this._iframeWindow.Frame.boot()}}}})}}),montageDefine("0f6b029","ui/toggle-button.reel/toggle-button",{dependencies:["ui/button.reel"],factory:function(e,t){var n=e("ui/button.reel").Button;t.ToggleButton=n.specialize({hasTemplate:{value:!0},_pressed:{value:!1},pressed:{get:function(){return this._pressed},set:function(e){this._pressed=!!e,this._label=this._pressed?this._pressedLabel:this._unpressedLabel,this.needsDraw=!0}},_unpressedLabel:{value:null},unpressedLabel:{get:function(){return this._unpressedLabel},set:function(e){this._unpressedLabel=e,this._pressed||(this.label=this._unpressedLabel,this.needsDraw=!0)}},_pressedLabel:{value:null},pressedLabel:{get:function(){return this._pressedLabel},set:function(e){this._pressedLabel=e,this._pressed&&(this.label=this._pressedLabel,this.needsDraw=!0)}},_pressedClass:{value:"pressed"},pressedClass:{get:function(){return this._pressedClass},set:function(e){this._pressedClass=e,this._pressed&&(this.needsDraw=!0)}},label:{get:function(){return Object.getPropertyDescriptor(n,"label").get.call(this)},set:function(e){Object.getPropertyDescriptor(n,"label").set.call(this,e),this._pressed===!0&&this._label===this._unpressedLabel?this.pressed=!1:this._pressed===!1&&this._label===this._pressedLabel&&(this.pressed=!0)}},setLabelInitialValue:{value:function(e){null===this._label&&(this._label=e)}},enterDocument:{value:function(e){this.super(e),e&&(null===this._unpressedLabel&&null!==this._label&&(this._unpressedLabel=this._label),null===this._pressedLabel&&null!==this._label&&(this._pressedLabel=this._label))}},draw:{value:function(){this.super(),this._pressed?(this._element.classList.add(this._pressedClass),this._element.setAttribute("aria-pressed",!0)):(this._element.classList.remove(this._pressedClass),this._element.setAttribute("aria-pressed",!1))}},_dispatchActionEvent:{value:function(){this.pressed=!this._pressed,this.super()}},toggle:{value:function(){this.pressed=!this._pressed}}})}}),montageDefine("918dae1","ui/code-mirror.reel/code-mirror",{dependencies:["montage/ui/component","./codemirror/codemirror-min"],factory:function(e,t){var n=e("montage/ui/component").Component,i=e("./codemirror/codemirror-min").CodeMirror;t.CodeMirror=n.specialize({_codeMirror:{value:null},tabSize:{value:4},indentUnit:{value:4},matchBrackets:{value:!1},lineNumbers:{value:!1},readOnly:{value:!1},_newValue:{value:null},_mode:{value:null},mode:{set:function(e){this._mode=e,this._codeMirror&&("json"==e?this._codeMirror.setOption("mode",{name:"javascript",json:!0}):this._codeMirror.setOption("mode",e))},get:function(){return this._mode}},enterDocument:{value:function(e){var t,n;if(e){n="json"===this.mode?{name:"javascript",json:!0}:this.mode,t=this._codeMirror=i(this._element,{mode:n,tabSize:this.tabSize,indentUnit:this.indentUnit,matchBrackets:this.matchBracket,lineNumbers:this.lineNumbers,readOnly:this.readOnly,value:this.value}),this._newValue=null;var r=this.element,a=this.ownerComponent.element.parentElement;setTimeout(function o(){getComputedStyle(r).width===getComputedStyle(a).width?setTimeout(o,50):t.refresh()},0)}}},draw:{value:function(){null!=this._newValue&&(this._codeMirror.setValue(this._newValue),this._newValue=null)}},value:{get:function(){return this._codeMirror?null!=this._newValue?this._newValue:this._codeMirror.getValue():this._newValue},set:function(e){this._newValue=e,this.needsDraw=!0}},hasModeErrors:{value:function(){return!!this._element.querySelector("*[class~='cm-error']")}}})}}),montageDefine("918dae1","ui/logger.reel/logger",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Logger=n.specialize({constructor:{value:function(){this.super()}},_scroller:{value:null},_output:{value:null},input:{distinct:!0,value:[]},_isOpen:{value:!1},isOpen:{get:function(){return this._isOpen},set:function(e){this._isOpen!==e&&(this._isOpen=e,this.needsDraw=!0)}},_value:{value:""},_newMessages:{distinct:!0,value:[]},templateDidLoad:{value:function(){this.addRangeAtPathChangeListener("input",this,"handleInputChange")}},log:{value:function(e){this._newMessages.push(e),this.needsDraw=!0}},draw:{value:function(){var e=this._newMessages;if(e.length>0){this._value+=e.join("\n")+"\n",e.length=0,this._element.classList.add("Logger-hilight"),this._scroller.scrollY=Number.MAX_VALUE;var t=this;window.setTimeout(function(){t.needsDraw=!0},100)}else this._element.classList.remove("Logger-hilight");this.isOpen?(this._element.classList.add("open"),this._scroller.needsDraw=!0):(this._element.classList.remove("open"),this._scroller.scrollY=Number.MAX_VALUE),this._output.textContent=this._value}},handleInputChange:{value:function(e){for(var t,n=0;t=e[n];n++)this.log(t)}},handleClearAction:{value:function(){this._value="",this.needsDraw=!0}}})}}),montageDefine("0f6b029","ui/scroller.reel/scroller.html",{text:'<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=scroller.css>\n    <script type=text/montage-serialization>{"scrollbars":{"prototype":"ui/scroll-bars.reel","properties":{"element":{"#":"scrollbars"}}},"translateComposer1":{"prototype":"montage/composer/translate-composer","properties":{"component":{"@":"owner"},"minTranslateX":0,"minTranslateY":0,"invertAxis":true},"bindings":{"translateX":{"<->":"@owner.scrollX"},"translateY":{"<->":"@owner.scrollY"},"maxTranslateX":{"<-":"@owner._maxTranslateX"},"maxTranslateY":{"<-":"@owner._maxTranslateY"},"axis":{"<-":"@owner.axis"},"hasMomentum":{"<-":"@owner.hasMomentum"}},"listeners":[{"type":"translateStart","listener":{"@":"owner"}},{"type":"translateEnd","listener":{"@":"owner"}}]},"owner":{"prototype":"ui/scroller.reel","properties":{"_content":{"#":"content"},"element":{"#":"montage-scroller"},"_scrollBars":{"@":"scrollbars"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=montage-scroller class=matte-Scroller>\n        <div data-montage-id=scrollbars></div>\n        <div data-montage-id=content class=matte-Scroller-content>\n            <div data-param=*></div>\n        </div>\n    </div>\n</body>\n</html>'}),montageDefine("727bebb","ui/condition.reel/condition",{dependencies:["montage","ui/component","core/logger"],factory:function(e,t){var n=(e("montage").Montage,e("ui/component").Component);e("core/logger").logger("condition"),t.Condition=n.specialize({hasTemplate:{value:!1},_condition:{value:!0},_contents:{value:null},constructor:{value:function(){this.super()}},condition:{set:function(e){e!==this._condition&&(this._condition=e,this.needsDraw=!0,this.isDeserializing||this._updateDomContent(e))},get:function(){return this._condition}},_updateDomContent:{value:function(e){"remove"===this.removalStrategy&&(e?this.domContent=this._contents:(this._contents=this.domContent,this.domContent=null))}},deserializedFromTemplate:{value:function(){this._condition||this._updateDomContent(this._condition)}},_removalStrategy:{value:"remove"},removalStrategy:{get:function(){return this._removalStrategy},set:function(e){var t;this._removalStrategy!==e&&("hide"!==e||this.isDeserializing||(t=this.domContent,this.domContent=this._contents,this._contents=t),this._removalStrategy=e,this.needsDraw=!0)}},draw:{value:function(){this.condition?this.element.classList.remove("montage-invisible"):this.element.classList.add("montage-invisible")}}})}}),montageDefine("918dae1","components",{dependencies:[],factory:function(e,t){t.components=[{label:"Button",name:"button",x:0,y:-76,left:12,width:45,serialization:{prototype:"digit/ui/button.reel",properties:{label:"Button",enabled:!0}},html:'<button data-montage-id=""></button>'},{label:"Slider",name:"slider",x:-46,y:-76,width:43,left:12,serialization:{prototype:"digit/ui/slider.reel",properties:{min:0,max:100,value:50}},html:'<input type="slider" data-montage-id="">'},{label:"Checkbox",name:"checkbox",x:-89,y:-76,left:22,width:24,serialization:{prototype:"digit/ui/checkbox.reel",properties:{checked:!0}},html:'<input type="checkbox" data-montage-id="">'},{label:"TextField",name:"textField",x:-69,y:-101,left:14,serialization:{prototype:"digit/ui/text-field.reel",properties:{value:"Editable text"}},html:'<input data-montage-id="" type="text">'},{label:"Text",name:"text",x:-37,y:-50,left:12,width:44,serialization:{prototype:"montage/ui/text.reel",properties:{value:"Text"}},html:'<p data-montage-id=""></p>'},{label:"Repetition",name:"repetition",x:-29,y:-125,left:19,width:30,serialization:{prototype:"montage/ui/repetition.reel",properties:{content:[1,2,3]}},html:'<ul data-montage-id=""><li>Item</li></ul>'}]}}),montageDefine("918dae1","ui/logger.reel/logger.html",{text:'<!doctype html>\n\n<html>\n<head>\n    <title>Logger</title>\n    <link rel=stylesheet href=logger.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"logger"},"_scroller":{"@":"scroller"},"_output":{"#":"output"}},"bindings":{"isOpen":{"<-":"@toggle.pressed"}}},"toggle":{"prototype":"matte/ui/toggle-button.reel","properties":{"element":{"#":"toggle"},"pressedLabel":"▲ Console"}},"clear":{"prototype":"matte/ui/button.reel","properties":{"element":{"#":"clear"}},"listeners":[{"type":"action","listener":{"@":"owner"}}]},"scroller":{"prototype":"matte/ui/scroller.reel","properties":{"element":{"#":"scroller"},"axis":"both"}}}</script>\n</head>\n<body>\n    <div data-montage-id=logger class=Logger>\n        <div data-montage-id=scroller class=Logger-scroller>\n            <div data-montage-id=output class=Logger-output></div>\n        </div>\n        <div data-montage-id=buttons class=Logger-buttons>\n            <button data-montage-id=clear class=Logger-clear>Clear</button>\n            <button data-montage-id=toggle class=Logger-toggle>◀ Console</button>\n        </div>\n    </div>\n  \n</body>\n</html>'}),montageDefine("0f6b029","ui/scroll-bars.reel/scroll-bars.html",{text:'<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=scroll-bars.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"matte-scroll-bars"},"_top":{"#":"top"},"_bottomClip":{"#":"bottom-clip"},"_bottom":{"#":"bottom"},"_left":{"#":"left"},"_rightClip":{"#":"right-clip"},"_right":{"#":"right"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=matte-scroll-bars class=matte-ScrollBars>\n        <div data-montage-id=top class=matte-ScrollBars-top></div>\n        <div data-montage-id=bottom-clip class=matte-ScrollBars-bottomClip>\n            <div data-montage-id=bottom class=matte-ScrollBars-bottom></div>\n        </div>\n        <div data-montage-id=left class=matte-ScrollBars-left></div>\n        <div data-montage-id=right-clip class=matte-ScrollBars-rightClip>\n            <div data-montage-id=right class=matte-ScrollBars-right></div>\n        </div>\n    </div>\n</body>\n</html>'}),montageDefine("727bebb","composer/composer",{dependencies:["montage","core/target"],factory:function(e,t){var n=(e("montage").Montage,e("core/target").Target);t.Composer=n.specialize({_component:{value:null},component:{get:function(){return this._component},set:function(e){this._component=e}},_element:{value:null},element:{get:function(){return this._element},set:function(e){this._element=e}},lazyLoad:{value:!1},_needsFrame:{value:!1},needsFrame:{set:function(e){this._needsFrame!==e&&(this._needsFrame=e,this._component&&e&&this._component.scheduleComposer(this))},get:function(){return this._needsFrame}},frame:{value:function(){}},_resolveDefaults:{value:function(){null==this.element&&null!=this.component&&(this.element=this.component.element)}},_load:{value:function(){this.element||this._resolveDefaults(),this.load()}},load:{value:function(){}},unload:{value:function(){}},deserializedFromTemplate:{value:function(){this.component&&this.component.addComposer(this)}}})}}),montageDefine("727bebb","ui/text.reel/text",{dependencies:["montage","ui/component"],factory:function(e,t){var n=(e("montage").Montage,e("ui/component").Component);t.Text=n.specialize({constructor:{value:function(){this.super()}},hasTemplate:{value:!1},_value:{value:null},value:{get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,this.needsDraw=!0)}},converter:{value:null},defaultValue:{value:""},_valueNode:{value:null},_RANGE:{value:document.createRange()},enterDocument:{value:function(e){if(e){var t=this._RANGE;t.selectNodeContents(this.element),t.deleteContents(),this._valueNode=document.createTextNode(""),t.insertNode(this._valueNode),this.element.classList.add("montage-Text")}}},draw:{value:function(){var e=this._value,t=e||0===e?e:this.defaultValue;this.converter&&(t=this.converter.convert(t)),this._valueNode.data=t}}})}}),montageDefine("0f6b029","package.json",{exports:{name:"matte",version:"0.1.4",repository:{type:"git",url:"https://github.com/montagejs/matte.git"},dependencies:{montage:"~0.13.0","native":"~0.1.3"},devDependencies:{"montage-testing":"~0.2.0"},exclude:["overview.html","overview","run-tests.html","test"],readmeFilename:"README.md",description:"matte ==============",bugs:{url:"https://github.com/montagejs/matte/issues"},_id:"matte@0.1.4",_from:"matte@0.1.4",directories:{lib:"./"},hash:"0f6b029",mappings:{montage:{name:"montage",hash:"727bebb",location:"../montage@727bebb/"},"native":{name:"native",hash:"abd8e11",location:"../native@abd8e11/"}},production:!0,useScriptInjection:!0}}),montageDefine("918dae1","ui/content-view.reel/content-view.html",{text:'<!DOCTYPE html>\n\n<html>\n<head>\n    <meta http-equiv=Content-Type content="text/html; charset=utf-8">\n    <title>Content View</title>\n    <link rel=stylesheet href=content-view.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"}}},"text":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"title"}},"bindings":{"value":{"<-":"@owner.title"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=owner class=content-view>\n        <h2 data-montage-id=title>Title</h2>\n        <div data-param=*></div>\n    </div>\n</body>\n</html>'}),montageDefine("918dae1","ui/component-button.reel/component-button",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.ComponentButton=n.specialize({component:{value:null},_iconStyle:{value:null},enterDocument:{value:function(e){if(e){var t=this,n=this._element;this._iconStyle=this.templateObjects.icon.style,n.addEventListener("click",function(){t._dispatchActionEvent()},!1)}}},draw:{value:function(){var e=this._element,t=this.component;e.setAttribute("title","Add "+t.label),this._iconStyle.backgroundPosition=t.x+"px "+t.y+"px",this._iconStyle.width=t.width+"px",this._iconStyle.left=t.left+"px"}}})}}),montageDefine("abd8e11","package.json",{exports:{name:"native",version:"0.1.3",repository:{type:"git",url:"https://github.com/montagejs/native.git"},dependencies:{montage:"~0.13.0"},devDependencies:{"montage-testing":"~0.2.0"},exclude:["overview.html","overview","run-tests.html","test"],readmeFilename:"README.md",description:"montage-native ==============",bugs:{url:"https://github.com/montagejs/native/issues"},_id:"native@0.1.3",_from:"native@~0.1.3",directories:{lib:"./"},hash:"abd8e11",mappings:{montage:{name:"montage",hash:"727bebb",location:"../montage@727bebb/"}},production:!0,useScriptInjection:!0}}),montageDefine("918dae1","ui/component-button.reel/component-button.html",{text:'<!DOCTYPE html>\n\n<html>\n<head>\n    <title></title>\n    <link rel=stylesheet type=text/css href=component-button.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"}}},"icon":{"value":{"#":"icon"}}}</script>\n</head>\n<body>\n    <div data-montage-id=owner class=component-button>\n        <div data-montage-id=icon class=icon></div>\n        <div class=highlighter></div>\n    </div>\n</body>\n</html>'}),montageDefine("918dae1","ui/example-button.reel/example-button",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.ExampleButton=n.specialize({hasTemplate:{value:!1},example:{value:!1},enterDocument:{value:function(e){if(e){var t=this,n=this._element;n.classList.add("example-button"),n.addEventListener("click",function(){t._dispatchActionEvent()},!1)}}},draw:{value:function(){this._element.textContent=this.example.label}}})}}),montageDefine("abd8e11","ui/native-control",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component,i=t.NativeControl=n.specialize({hasTemplate:{value:!1},willPrepareForDraw:{value:function(){}}});i.addAttributes({accesskey:null,contenteditable:null,contextmenu:null,dir:null,draggable:null,dropzone:null,hidden:{dataType:"boolean"},lang:null,spellcheck:null,style:null,tabindex:null,title:null})}}),montageDefine("918dae1","ui/montage-frame.reel/montage-frame.html",{text:'<!DOCTYPE html>\n\n<html>\n<head>\n    <title></title>\n    <link rel=stylesheet type=text/css href=montage-frame.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"component"}}}}</script>\n\n</head>\n<body>\n<iframe src=frame/frame.html data-montage-id=component class=montage-frame></iframe>\n</body>\n</html>'}),montageDefine("abd8e11","ui/anchor.reel/anchor",{dependencies:["ui/native-control"],factory:function(e,t){var n=e("ui/native-control").NativeControl,i=t.Anchor=n.specialize({blur:{value:function(){this._element.blur()}},focus:{value:function(){this._element.focus()}}});i.addAttributes({textContent:null,href:null,hreflang:null,media:null,rel:null,target:null,type:null})}}),montageDefine("0f6b029","ui/anchor.reel/anchor",{dependencies:["montage/ui/component","native/ui/anchor.reel"],factory:function(e,t){var n=(e("montage/ui/component").Component,e("native/ui/anchor.reel").Anchor);t.Anchor=n.specialize({hasTemplate:{value:!1},constructor:{value:function(){this.super(),this.classList.add("matte-Anchor")}}})}}),montageDefine("0f6b029","ui/button.reel/button",{dependencies:["native/ui/button.reel"],factory:function(e,t){var n=e("native/ui/button.reel").Button;t.Button=n.specialize({hasTemplate:{value:!0},constructor:{value:function(){this.super(),this.classList.add("matte-Button")}}})}}),montageDefine("0f6b029","ui/toggle-button.reel/toggle-button.html",{text:"<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=../button.reel/button.css>\n    <link rel=stylesheet href=toggle-button.css>\n</head>\n<body>\n</body>\n</html>"}),montageDefine("918dae1","ui/code-mirror.reel/code-mirror.html",{text:"<!DOCTYPE html>\n\n<html>\n<head>\n    <title></title>\n    <link rel=stylesheet type=text/css href=codemirror/codemirror.css>\n</head>\n<body>\n</body>\n</html>"}),montageDefine("0f6b029","ui/button.reel/button.html",{text:"<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=button.css>\n</head>\n<body>\n</body>\n</html>"}),montageDefine("918dae1","ui/content-view.reel/content-view",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.ContentView=n.specialize({})}});
bundleLoaded("index.html.bundle-1-0.js")